{"remainingRequest":"/home/marc/Escritorio/MCMeals/client.mcmeals.com/node_modules/thread-loader/dist/cjs.js!/home/marc/Escritorio/MCMeals/client.mcmeals.com/node_modules/babel-loader/lib/index.js!/home/marc/Escritorio/MCMeals/client.mcmeals.com/node_modules/cache-loader/dist/cjs.js??ref--0-0!/home/marc/Escritorio/MCMeals/client.mcmeals.com/node_modules/@vue/cli-service/node_modules/vue-loader-v16/dist/index.js??ref--0-1!/home/marc/Escritorio/MCMeals/client.mcmeals.com/src/views/auth/Login.vue?vue&type=script&lang=js","dependencies":[{"path":"/home/marc/Escritorio/MCMeals/client.mcmeals.com/src/views/auth/Login.vue","mtime":1621190878850},{"path":"/home/marc/Escritorio/MCMeals/client.mcmeals.com/node_modules/cache-loader/dist/cjs.js","mtime":1617103260404},{"path":"/home/marc/Escritorio/MCMeals/client.mcmeals.com/node_modules/thread-loader/dist/cjs.js","mtime":1617103261476},{"path":"/home/marc/Escritorio/MCMeals/client.mcmeals.com/node_modules/babel-loader/lib/index.js","mtime":1617103260368},{"path":"/home/marc/Escritorio/MCMeals/client.mcmeals.com/node_modules/cache-loader/dist/cjs.js","mtime":1617103260404},{"path":"/home/marc/Escritorio/MCMeals/client.mcmeals.com/node_modules/@vue/cli-service/node_modules/vue-loader-v16/dist/index.js","mtime":1617103260244}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvd2ViLnRpbWVycy5qcyI7CmltcG9ydCB7IExPR0lOIH0gZnJvbSAiQC9zdG9yZS9hY3Rpb25zLnR5cGUiOwpleHBvcnQgZGVmYXVsdCB7CiAgbmFtZTogIkxvZ2luIiwKICBkYXRhOiBmdW5jdGlvbiBkYXRhKCkgewogICAgcmV0dXJuIHsKICAgICAgdG9hc3RyX3N1Y2Nlc3M6IGZhbHNlLAogICAgICB0b2FzdHJfZXJyb3I6IGZhbHNlCiAgICB9OwogIH0sCiAgbWV0aG9kczogewogICAgbG9naW46IGZ1bmN0aW9uIGxvZ2luKGVtYWlsLCBwYXNzd29yZCkgewogICAgICB2YXIgX3RoaXMgPSB0aGlzOwoKICAgICAgdGhpcy4kc3RvcmUuZGlzcGF0Y2goTE9HSU4sIHsKICAgICAgICBlbWFpbDogZW1haWwsCiAgICAgICAgcGFzc3dvcmQ6IHBhc3N3b3JkCiAgICAgIH0pLnRoZW4oZnVuY3Rpb24gKHJlc3BvbnNlKSB7CiAgICAgICAgaWYgKHJlc3BvbnNlLnVzZXIpIHsKICAgICAgICAgIF90aGlzLnRvYXN0cl9lcnJvciA9IGZhbHNlOwogICAgICAgICAgX3RoaXMudG9hc3RyX3N1Y2Nlc3MgPSB0cnVlOwogICAgICAgICAgc2V0VGltZW91dChmdW5jdGlvbiAoKSB7CiAgICAgICAgICAgIF90aGlzLnRvYXN0cl9zdWNjZXNzID0gZmFsc2U7CgogICAgICAgICAgICBpZiAocmVzcG9uc2UudXNlci5yb2xlID09PSAiYWRtaW4iKSB7CiAgICAgICAgICAgICAgX3RoaXMuJHJvdXRlci5wdXNoKHsKICAgICAgICAgICAgICAgIG5hbWU6ICJBZG1pbi1Vc2VycyIKICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgICBfdGhpcy4kcm91dGVyLnB1c2goewogICAgICAgICAgICAgICAgbmFtZTogIkhvbWUiCiAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgIH0KICAgICAgICAgIH0sIDIwMDApOwogICAgICAgIH0gZWxzZSB7CiAgICAgICAgICBfdGhpcy50b2FzdHJfc3VjY2VzcyA9IGZhbHNlOwogICAgICAgICAgX3RoaXMudG9hc3RyX2Vycm9yID0gdHJ1ZTsKICAgICAgICAgIHNldFRpbWVvdXQoZnVuY3Rpb24gKCkgewogICAgICAgICAgICByZXR1cm4gX3RoaXMudG9hc3RyX2Vycm9yID0gZmFsc2U7CiAgICAgICAgICB9LCAzMDAwKTsKICAgICAgICB9CiAgICAgIH0pWyJjYXRjaCJdKGZ1bmN0aW9uIChlcnJvcikgewogICAgICAgIGNvbnNvbGUuZXJyb3IoZXJyb3IpOwogICAgICB9KTsKICAgIH0sCiAgICByZW1vdmVUb2FzdHI6IGZ1bmN0aW9uIHJlbW92ZVRvYXN0cigpIHsKICAgICAgdGhpcy50b2FzdHJfZXJyb3IgPSBmYWxzZTsKICAgICAgdGhpcy50b2FzdHJfc3VjY2VzcyA9IGZhbHNlOwogICAgfQogIH0KfTs="},{"version":3,"sources":["/home/marc/Escritorio/MCMeals/client.mcmeals.com/src/views/auth/Login.vue"],"names":[],"mappings":";AA8BE,SAAS,KAAT,QAAsB,sBAAtB;AAEA,eAAe;AACb,EAAA,IAAI,EAAE,OADO;AAGb,EAAA,IAHa,kBAGN;AACL,WAAO;AACL,MAAA,cAAc,EAAE,KADX;AAEL,MAAA,YAAY,EAAE;AAFT,KAAP;AAID,GARY;AAUb,EAAA,OAAO,EAAE;AACL,IAAA,KADK,iBACC,KADD,EACQ,QADR,EACkB;AAAA;;AACrB,WAAK,MAAL,CAAY,QAAZ,CAAqB,KAArB,EAA4B;AAAE,QAAA,KAAK,EAAL,KAAF;AAAS,QAAA,QAAO,EAAP;AAAT,OAA5B,EACG,IADH,CACQ,UAAC,QAAD,EAAc;AAClB,YAAI,QAAQ,CAAC,IAAb,EAAmB;AACjB,UAAA,KAAI,CAAC,YAAL,GAAoB,KAApB;AACA,UAAA,KAAI,CAAC,cAAL,GAAsB,IAAtB;AACA,UAAA,UAAU,CAAC,YAAM;AACf,YAAA,KAAI,CAAC,cAAL,GAAsB,KAAtB;;AACA,gBAAI,QAAQ,CAAC,IAAT,CAAc,IAAd,KAAuB,OAA3B,EAAoC;AAClC,cAAA,KAAI,CAAC,OAAL,CAAa,IAAb,CAAkB;AAAE,gBAAA,IAAI,EAAE;AAAR,eAAlB;AACF,aAFA,MAEO;AACL,cAAA,KAAI,CAAC,OAAL,CAAa,IAAb,CAAkB;AAAE,gBAAA,IAAI,EAAE;AAAR,eAAlB;AACF;AACD,WAPS,EAOP,IAPO,CAAV;AAQF,SAXA,MAWO;AACL,UAAA,KAAI,CAAC,cAAL,GAAsB,KAAtB;AACA,UAAA,KAAI,CAAC,YAAL,GAAoB,IAApB;AACA,UAAA,UAAU,CAAC;AAAA,mBAAM,KAAI,CAAC,YAAL,GAAoB,KAA1B;AAAA,WAAD,EAAkC,IAAlC,CAAV;AACF;AACD,OAlBH,WAmBS,UAAC,KAAD,EAAW;AAChB,QAAA,OAAO,CAAC,KAAR,CAAc,KAAd;AACD,OArBH;AAsBD,KAxBI;AA0BL,IAAA,YA1BK,0BA0BU;AACb,WAAK,YAAL,GAAoB,KAApB;AACA,WAAK,cAAL,GAAsB,KAAtB;AACF;AA7BK;AAVI,CAAf","sourcesContent":["<template>\n  <section class=\"login\">\n\n    <h1>SIGN IN</h1>\n    \n    <form class=\"login-form\" @submit.prevent=\"login(username, password)\">\n      <label>EMAIL</label>\n      <input type=\"email\" v-model=\"username\" required />\n\n      <label>PASSWORD</label>\n      <input type=\"password\" v-model=\"password\" required />\n\n      <section>\n        <button class=\"login-button\">SIGN IN</button>\n        <router-link to=\"/register\">Register</router-link>\n      </section>  \n    </form>\n\n    <article @click=\"removeToastr()\" v-if=\"toastr_success\" class=\"toastr toastr-green\">\n      <span>Logging in</span>\n    </article>\n    <article @click=\"removeToastr()\" v-if=\"toastr_error\" class=\"toastr toastr-red\">\n      <span>Your credentials are incorrect</span>\n    </article>\n\n  </section>\n</template>\n\n\n<script>\n  import { LOGIN } from \"@/store/actions.type\";\n\n  export default {\n    name: \"Login\",\n\n    data() {\n      return {\n        toastr_success: false,\n        toastr_error: false,\n      };\n    },\n  \n    methods: {\n        login(email, password) {\n          this.$store.dispatch(LOGIN, { email, password })\n            .then((response) => {\n              if (response.user) {\n                this.toastr_error = false;\n                this.toastr_success = true;\n                setTimeout(() => {\n                  this.toastr_success = false;\n                  if (response.user.role === \"admin\") {\n                    this.$router.push({ name: \"Admin-Users\"})\n                  } else {\n                    this.$router.push({ name: \"Home\"})\n                  }\n                }, 2000);\n              } else {\n                this.toastr_success = false;\n                this.toastr_error = true;\n                setTimeout(() => this.toastr_error = false, 3000);\n              }\n            })\n            .catch((error) => {\n              console.error(error)\n            })\n        },\n\n        removeToastr() {\n          this.toastr_error = false;\n          this.toastr_success = false;\n        }\n    },\n  }\n</script>\n\n<style src=\"./Login.css\" scoped />"],"sourceRoot":""}]}