{"remainingRequest":"/home/marc/Escritorio/MCMeals/client.mcmeals.com/node_modules/babel-loader/lib/index.js!/home/marc/Escritorio/MCMeals/client.mcmeals.com/node_modules/ts-loader/index.js??ref--13-2!/home/marc/Escritorio/MCMeals/client.mcmeals.com/src/store/modules/auth.module.ts","dependencies":[{"path":"/home/marc/Escritorio/MCMeals/client.mcmeals.com/src/store/modules/auth.module.ts","mtime":1618753670429},{"path":"/home/marc/Escritorio/MCMeals/client.mcmeals.com/node_modules/cache-loader/dist/cjs.js","mtime":1617103260404},{"path":"/home/marc/Escritorio/MCMeals/client.mcmeals.com/node_modules/babel-loader/lib/index.js","mtime":1617103260368},{"path":"/home/marc/Escritorio/MCMeals/client.mcmeals.com/node_modules/ts-loader/index.js","mtime":1617103261484}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMub2JqZWN0LnRvLXN0cmluZy5qcyI7CmltcG9ydCBfZGVmaW5lUHJvcGVydHkgZnJvbSAiL2hvbWUvbWFyYy9Fc2NyaXRvcmlvL01DTWVhbHMvY2xpZW50Lm1jbWVhbHMuY29tL25vZGVfbW9kdWxlcy9AYmFiZWwvcnVudGltZS9oZWxwZXJzL2VzbS9kZWZpbmVQcm9wZXJ0eSI7Cgp2YXIgX2FjdGlvbnMsIF9tdXRhdGlvbnM7CgppbXBvcnQgQXBpU2VydmljZSBmcm9tICJAL2NvbW1vbi9hcGkuc2VydmljZSI7CmltcG9ydCBKd3RTZXJ2aWNlIGZyb20gIkAvY29tbW9uL2p3dC5zZXJ2aWNlIjsKaW1wb3J0IHsgTE9HSU4sIExPR09VVCwgUkVHSVNURVIsIFZBTElEQVRFX1RPS0VOIH0gZnJvbSAiQC9zdG9yZS9hY3Rpb25zLnR5cGUiOwppbXBvcnQgeyBTRVRfQVVUSCwgUFVSR0VfQVVUSCwgU0VUX0VSUk9SIH0gZnJvbSAiQC9zdG9yZS9tdXRhdGlvbnMudHlwZSI7CnZhciBzdGF0ZSA9IHsKICBlcnJvcnM6IG51bGwsCiAgdXNlcjoge30sCiAgcHJvZmlsZToge30sCiAgY2FydDoge30sCiAgaXNBdXRoZW50aWNhdGVkOiBmYWxzZQp9Owp2YXIgZ2V0dGVycyA9IHsKICAvLyBDdXJyZW50IHVzZXIKICB1c2VyOiBmdW5jdGlvbiB1c2VyKHN0YXRlKSB7CiAgICByZXR1cm4gc3RhdGUudXNlcjsKICB9LAogIC8vIElzIGF1dGhlbnRpY2F0ZWQKICBpc0F1dGhlbnRpY2F0ZWQ6IGZ1bmN0aW9uIGlzQXV0aGVudGljYXRlZChzdGF0ZSkgewogICAgcmV0dXJuIHN0YXRlLmlzQXV0aGVudGljYXRlZDsKICB9LAogIC8vIEdldCBlcnJvcnMKICBnZXRFcnJvcnM6IGZ1bmN0aW9uIGdldEVycm9ycyhzdGF0ZSkgewogICAgcmV0dXJuIHN0YXRlLmVycm9yczsKICB9LAogIC8vIEdldCBwcm9maWxlCiAgcHJvZmlsZTogZnVuY3Rpb24gcHJvZmlsZShzdGF0ZSkgewogICAgcmV0dXJuIHN0YXRlLnByb2ZpbGU7CiAgfSwKICAvLyBHZXQgY2FydAogIGNhcnQ6IGZ1bmN0aW9uIGNhcnQoc3RhdGUpIHsKICAgIHJldHVybiBzdGF0ZS5jYXJ0OwogIH0KfTsKdmFyIGFjdGlvbnMgPSAoX2FjdGlvbnMgPSB7fSwgX2RlZmluZVByb3BlcnR5KF9hY3Rpb25zLCBMT0dJTiwgZnVuY3Rpb24gKGNvbnRleHQsIGNyZWRlbnRpYWxzKSB7CiAgcmV0dXJuIG5ldyBQcm9taXNlKGZ1bmN0aW9uIChyZXNvbHZlKSB7CiAgICBBcGlTZXJ2aWNlLnBvc3QoImF1dGgvbG9naW4iLCBjcmVkZW50aWFscykudGhlbihmdW5jdGlvbiAoX3JlZikgewogICAgICB2YXIgZGF0YSA9IF9yZWYuZGF0YTsKCiAgICAgIGlmIChkYXRhLnVzZXIpIHsKICAgICAgICBjb250ZXh0LmNvbW1pdChTRVRfQVVUSCwgZGF0YSk7CiAgICAgIH0KCiAgICAgIHJlc29sdmUoZGF0YSk7CiAgICB9KVsiY2F0Y2giXShmdW5jdGlvbiAoX3JlZjIpIHsKICAgICAgdmFyIHJlc3BvbnNlID0gX3JlZjIucmVzcG9uc2U7CiAgICAgIGNvbnRleHQuY29tbWl0KFNFVF9FUlJPUiwgcmVzcG9uc2UpOwogICAgfSk7CiAgfSk7Cn0pLCBfZGVmaW5lUHJvcGVydHkoX2FjdGlvbnMsIExPR09VVCwgZnVuY3Rpb24gKGNvbnRleHQpIHsKICBjb250ZXh0LmNvbW1pdChQVVJHRV9BVVRIKTsKfSksIF9kZWZpbmVQcm9wZXJ0eShfYWN0aW9ucywgUkVHSVNURVIsIGZ1bmN0aW9uIChjb250ZXh0LCBjcmVkZW50aWFscykgewogIHJldHVybiBuZXcgUHJvbWlzZShmdW5jdGlvbiAocmVzb2x2ZSwgcmVqZWN0KSB7CiAgICBBcGlTZXJ2aWNlLnBvc3QoImF1dGgvcmVnaXN0ZXIiLCBjcmVkZW50aWFscykudGhlbihmdW5jdGlvbiAoX3JlZjMpIHsKICAgICAgdmFyIGRhdGEgPSBfcmVmMy5kYXRhOwogICAgICByZXNvbHZlKGRhdGEpOwogICAgfSlbImNhdGNoIl0oZnVuY3Rpb24gKF9yZWY0KSB7CiAgICAgIHZhciBlcnJvciA9IF9yZWY0LmVycm9yOwogICAgICBjb25zb2xlLmxvZyhlcnJvcik7IC8vIGNvbnRleHQuY29tbWl0KFNFVF9FUlJPUiwgcmVzcG9uc2UuZGF0YSk7CgogICAgICByZWplY3QoZXJyb3IpOwogICAgfSk7CiAgfSk7Cn0pLCBfZGVmaW5lUHJvcGVydHkoX2FjdGlvbnMsIFZBTElEQVRFX1RPS0VOLCBmdW5jdGlvbiAoY29udGV4dCkgewogIHZhciB0b2tlbiA9IEp3dFNlcnZpY2UuZ2V0VG9rZW4oKTsKCiAgaWYgKHRva2VuKSB7CiAgICBBcGlTZXJ2aWNlLnBvc3QoImF1dGgvdmFsaWRhdGUiLCB7CiAgICAgIHRva2VuOiB0b2tlbgogICAgfSkudGhlbihmdW5jdGlvbiAoX3JlZjUpIHsKICAgICAgdmFyIGRhdGEgPSBfcmVmNS5kYXRhOwogICAgICBjb250ZXh0LmNvbW1pdChTRVRfQVVUSCwgZGF0YSk7CiAgICB9KVsiY2F0Y2giXShmdW5jdGlvbiAoX3JlZjYpIHsKICAgICAgdmFyIGVycm9yID0gX3JlZjYuZXJyb3I7CiAgICAgIGNvbnRleHQuY29tbWl0KFBVUkdFX0FVVEgpOwogICAgfSk7CiAgfQp9KSwgX2FjdGlvbnMpOwp2YXIgbXV0YXRpb25zID0gKF9tdXRhdGlvbnMgPSB7fSwgX2RlZmluZVByb3BlcnR5KF9tdXRhdGlvbnMsIFNFVF9FUlJPUiwgZnVuY3Rpb24gKHN0YXRlLCBlcnJvcikgewogIHN0YXRlLmVycm9ycyA9IGVycm9yOwp9KSwgX2RlZmluZVByb3BlcnR5KF9tdXRhdGlvbnMsIFNFVF9BVVRILCBmdW5jdGlvbiAoc3RhdGUsIGRhdGEpIHsKICBzdGF0ZS5pc0F1dGhlbnRpY2F0ZWQgPSB0cnVlOwogIHN0YXRlLmVycm9ycyA9IHt9OwogIHN0YXRlLnVzZXIgPSBkYXRhLnVzZXI7CgogIGlmIChkYXRhLnRva2VuKSB7CiAgICBKd3RTZXJ2aWNlLnNhdmVUb2tlbihkYXRhLnRva2VuKTsKICB9Cn0pLCBfZGVmaW5lUHJvcGVydHkoX211dGF0aW9ucywgUFVSR0VfQVVUSCwgZnVuY3Rpb24gKHN0YXRlKSB7CiAgc3RhdGUuaXNBdXRoZW50aWNhdGVkID0gZmFsc2U7CiAgc3RhdGUuZXJyb3JzID0ge307CiAgc3RhdGUudXNlciA9IHt9OwogIEp3dFNlcnZpY2UuZGVzdHJveVRva2VuKCk7Cn0pLCBfbXV0YXRpb25zKTsKZXhwb3J0IGRlZmF1bHQgewogIHN0YXRlOiBzdGF0ZSwKICBhY3Rpb25zOiBhY3Rpb25zLAogIG11dGF0aW9uczogbXV0YXRpb25zLAogIGdldHRlcnM6IGdldHRlcnMKfTs="},{"version":3,"sources":["/home/marc/Escritorio/MCMeals/client.mcmeals.com/src/store/modules/auth.module.ts"],"names":[],"mappings":"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","sourcesContent":["import ApiService from \"@/common/api.service\";\nimport JwtService from \"@/common/jwt.service\";\nimport {\n  LOGIN,\n  LOGOUT,\n  REGISTER,\n  VALIDATE_TOKEN,\n} from \"@/store/actions.type\";\nimport {\n  SET_AUTH,\n  PURGE_AUTH,\n  SET_ERROR,\n} from \"@/store/mutations.type\";\n\n\nconst state = {\n  errors: null,\n  user: {},\n  profile: {},\n  cart: {},\n  isAuthenticated: false,\n};\n\n\nconst getters = {\n  // Current user\n  user(state: any) {\n    return state.user;\n  },\n\n  // Is authenticated\n  isAuthenticated(state: any) {\n    return state.isAuthenticated;\n  },\n\n  // Get errors\n  getErrors(state: any) {\n    return state.errors;\n  },\n\n  // Get profile\n  profile(state: any) {\n    return state.profile;\n  },\n\n  // Get cart\n  cart(state: any) {\n    return state.cart;\n  }\n};\n\n\nconst actions = {\n  // Login\n  [LOGIN](context: any, credentials: any) {\n    return new Promise(resolve => {\n      ApiService.post(\"auth/login\", credentials)\n        .then(({ data }) => {\n          if (data.user) {\n            context.commit(SET_AUTH, data);\n          }\n          resolve(data);\n        })\n        .catch(({ response }) => {\n          context.commit(SET_ERROR, response);\n        });\n    });\n  },\n\n\n  // Logout\n  [LOGOUT](context: any) {\n    context.commit(PURGE_AUTH);\n  },\n\n\n  // Register\n  [REGISTER](context: any, credentials: any) {\n    return new Promise((resolve, reject) => {\n      ApiService.post(\"auth/register\", credentials)\n        .then(({ data }) => {\n          resolve(data);\n        })\n        .catch(({ error }) => {\n          console.log(error);\n          // context.commit(SET_ERROR, response.data);\n          reject(error);\n        });\n    });\n  },\n\n\n  // Check auth\n  [VALIDATE_TOKEN](context: any) {\n    const token = JwtService.getToken();\n    if (token) {\n      ApiService.post(\"auth/validate\", { token })\n        .then(({ data }) => {\n          context.commit(SET_AUTH, data);\n        })\n        .catch(({ error }) => {\n          context.commit(PURGE_AUTH);\n        });\n    }\n  },\n};\n\n\nconst mutations = {\n  // Set errors\n  [SET_ERROR](state: any, error: any) {\n    state.errors = error;\n  },\n\n\n  // Set auth\n  [SET_AUTH](state: any, data: any) {\n    state.isAuthenticated = true;\n    state.errors = {};\n    state.user = data.user;\n    if (data.token) {\n      JwtService.saveToken(data.token);\n    }\n  },\n\n  \n  // Purge auth\n  [PURGE_AUTH](state: any) {\n    state.isAuthenticated = false;\n    state.errors = {};\n    state.user = {};\n    JwtService.destroyToken();\n  },\n};\n\n\nexport default {\n  state,\n  actions,\n  mutations,\n  getters\n};"],"sourceRoot":""}]}