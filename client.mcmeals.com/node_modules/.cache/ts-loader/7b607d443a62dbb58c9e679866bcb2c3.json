{"remainingRequest":"/home/marc/Escritorio/MCMeals/client.mcmeals.com/node_modules/thread-loader/dist/cjs.js!/home/marc/Escritorio/MCMeals/client.mcmeals.com/node_modules/babel-loader/lib/index.js!/home/marc/Escritorio/MCMeals/client.mcmeals.com/node_modules/ts-loader/index.js??ref--13-3!/home/marc/Escritorio/MCMeals/client.mcmeals.com/src/store/modules/cart.module.ts","dependencies":[{"path":"/home/marc/Escritorio/MCMeals/client.mcmeals.com/src/store/modules/cart.module.ts","mtime":1621201738957},{"path":"/home/marc/Escritorio/MCMeals/client.mcmeals.com/node_modules/cache-loader/dist/cjs.js","mtime":1617103260404},{"path":"/home/marc/Escritorio/MCMeals/client.mcmeals.com/node_modules/thread-loader/dist/cjs.js","mtime":1617103261476},{"path":"/home/marc/Escritorio/MCMeals/client.mcmeals.com/node_modules/babel-loader/lib/index.js","mtime":1617103260368},{"path":"/home/marc/Escritorio/MCMeals/client.mcmeals.com/node_modules/ts-loader/index.js","mtime":1617103261484}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuYXJyYXkuZmlsdGVyLmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuYXJyYXkubWFwLmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMub2JqZWN0LnRvLXN0cmluZy5qcyI7CmltcG9ydCBfZGVmaW5lUHJvcGVydHkgZnJvbSAiL2hvbWUvbWFyYy9Fc2NyaXRvcmlvL01DTWVhbHMvY2xpZW50Lm1jbWVhbHMuY29tL25vZGVfbW9kdWxlcy9AYmFiZWwvcnVudGltZS9oZWxwZXJzL2VzbS9kZWZpbmVQcm9wZXJ0eSI7Cgp2YXIgX2FjdGlvbnMsIF9tdXRhdGlvbnM7CgppbXBvcnQgQXBpU2VydmljZSBmcm9tICJAL2NvbW1vbi9hcGkuc2VydmljZSI7CmltcG9ydCBhdXRoIGZyb20gIi4vYXV0aC5tb2R1bGUiOwppbXBvcnQgcHJvZHVjdHMgZnJvbSAiLi9wcm9kdWN0cy5tb2R1bGUiOwppbXBvcnQgeyBHRVRfQ0FSVCwgQUREX0NBUlQsIEFERF9DVVNUT01fVE9fQ0FSVCwgVVBEQVRFX0NBUlQsIFJFTU9WRV9DQVJUIH0gZnJvbSAiQC9zdG9yZS9hY3Rpb25zLnR5cGUiOwppbXBvcnQgeyBTRVRfRVJST1IsIFNFVF9DQVJULCBERUxFVEVfQ0FSVCB9IGZyb20gIkAvc3RvcmUvbXV0YXRpb25zLnR5cGUiOwp2YXIgc3RhdGUgPSB7CiAgZXJyb3JzOiBudWxsLAogIGNhcnQ6IG51bGwKfTsKdmFyIGdldHRlcnMgPSB7CiAgLy8gR2V0IHVzZXIncyBjYXJ0CiAgY2FydDogZnVuY3Rpb24gY2FydChzdGF0ZSkgewogICAgcmV0dXJuIHN0YXRlLmNhcnQ7CiAgfSwKICAvLyBHZXQgY2FydCBzdWJ0b3RhbAogIHN1YnRvdGFsOiBmdW5jdGlvbiBzdWJ0b3RhbChzdGF0ZSkgewogICAgdmFyIHN1YnRvdGFsID0gMDsKICAgIHN0YXRlLmNhcnQubWFwKGZ1bmN0aW9uIChhcnRpY2xlKSB7CiAgICAgIHN1YnRvdGFsICs9IGFydGljbGUucHJvZHVjdC5wcmljZSAqIGFydGljbGUucXVhbnRpdHk7CiAgICB9KTsKICAgIHJldHVybiBzdWJ0b3RhbDsKICB9Cn07CnZhciBhY3Rpb25zID0gKF9hY3Rpb25zID0ge30sIF9kZWZpbmVQcm9wZXJ0eShfYWN0aW9ucywgR0VUX0NBUlQsIGZ1bmN0aW9uIChjb250ZXh0KSB7CiAgcmV0dXJuIG5ldyBQcm9taXNlKGZ1bmN0aW9uIChyZXNvbHZlKSB7CiAgICBBcGlTZXJ2aWNlLmdldCgiY2FydC8iICsgYXV0aC5nZXR0ZXJzLnVzZXIoYXV0aC5zdGF0ZSkuaWQpLnRoZW4oZnVuY3Rpb24gKF9yZWYpIHsKICAgICAgdmFyIGRhdGEgPSBfcmVmLmRhdGE7CiAgICAgIGNvbnRleHQuY29tbWl0KFNFVF9DQVJULCBkYXRhKTsKICAgICAgcmVzb2x2ZShkYXRhKTsKICAgIH0pWyJjYXRjaCJdKGZ1bmN0aW9uIChfcmVmMikgewogICAgICB2YXIgcmVzcG9uc2UgPSBfcmVmMi5yZXNwb25zZTsKICAgICAgY29udGV4dC5jb21taXQoU0VUX0VSUk9SLCByZXNwb25zZSk7CiAgICB9KTsKICB9KTsKfSksIF9kZWZpbmVQcm9wZXJ0eShfYWN0aW9ucywgQUREX0NBUlQsIGZ1bmN0aW9uIChjb250ZXh0LCBxdWFudGl0eSkgewogIHZhciBjYXJ0ID0gewogICAgdXNlcjogYXV0aC5nZXR0ZXJzLnVzZXIoYXV0aC5zdGF0ZSksCiAgICBwcm9kdWN0OiBwcm9kdWN0cy5nZXR0ZXJzLnByb2R1Y3QocHJvZHVjdHMuc3RhdGUpLAogICAgcXVhbnRpdHk6IHF1YW50aXR5CiAgfTsKICByZXR1cm4gbmV3IFByb21pc2UoZnVuY3Rpb24gKHJlc29sdmUpIHsKICAgIEFwaVNlcnZpY2UucG9zdCgiY2FydCIsIGNhcnQpLnRoZW4oZnVuY3Rpb24gKF9yZWYzKSB7CiAgICAgIHZhciBkYXRhID0gX3JlZjMuZGF0YTsKICAgICAgcmVzb2x2ZShkYXRhKTsKICAgIH0pOwogIH0pOwp9KSwgX2RlZmluZVByb3BlcnR5KF9hY3Rpb25zLCBBRERfQ1VTVE9NX1RPX0NBUlQsIGZ1bmN0aW9uIChjb250ZXh0LCBkYXRhKSB7CiAgZGF0YS51c2VyID0gYXV0aC5nZXR0ZXJzLnVzZXIoYXV0aC5zdGF0ZSk7CiAgcmV0dXJuIG5ldyBQcm9taXNlKGZ1bmN0aW9uIChyZXNvbHZlKSB7CiAgICBBcGlTZXJ2aWNlLnBvc3QoImNhcnQvY3VzdG9tIiwgZGF0YSkudGhlbihmdW5jdGlvbiAoX3JlZjQpIHsKICAgICAgdmFyIGRhdGEgPSBfcmVmNC5kYXRhOwogICAgICByZXNvbHZlKGRhdGEpOwogICAgfSlbImNhdGNoIl0oZnVuY3Rpb24gKF9yZWY1KSB7CiAgICAgIHZhciByZXNwb25zZSA9IF9yZWY1LnJlc3BvbnNlOwogICAgICBjb250ZXh0LmNvbW1pdChTRVRfRVJST1IsIHJlc3BvbnNlKTsKICAgIH0pOwogIH0pOwp9KSwgX2RlZmluZVByb3BlcnR5KF9hY3Rpb25zLCBVUERBVEVfQ0FSVCwgZnVuY3Rpb24gKGNvbnRleHQsIGRhdGEpIHsKICB2YXIgY2FydCA9IGRhdGEuYXJ0aWNsZTsKICBjYXJ0LnF1YW50aXR5ID0gZGF0YS5xdWFudGl0eTsKCiAgaWYgKGRhdGEucXVhbnRpdHkgPT09IDApIHsKICAgIGNvbnRleHQuY29tbWl0KERFTEVURV9DQVJULCBkYXRhLmFydGljbGUpOwogIH0KCiAgcmV0dXJuIG5ldyBQcm9taXNlKGZ1bmN0aW9uIChyZXNvbHZlKSB7CiAgICBBcGlTZXJ2aWNlLnB1dCgiY2FydC8iICsgY2FydC5pZCwgY2FydCkudGhlbihmdW5jdGlvbiAoX3JlZjYpIHsKICAgICAgdmFyIGRhdGEgPSBfcmVmNi5kYXRhOwogICAgICByZXNvbHZlKGRhdGEpOwogICAgfSlbImNhdGNoIl0oZnVuY3Rpb24gKF9yZWY3KSB7CiAgICAgIHZhciByZXNwb25zZSA9IF9yZWY3LnJlc3BvbnNlOwogICAgICBjb250ZXh0LmNvbW1pdChTRVRfRVJST1IsIHJlc3BvbnNlKTsKICAgIH0pOwogIH0pOwp9KSwgX2RlZmluZVByb3BlcnR5KF9hY3Rpb25zLCBSRU1PVkVfQ0FSVCwgZnVuY3Rpb24gKGNvbnRleHQsIGNhcnQpIHsKICBjb250ZXh0LmNvbW1pdChERUxFVEVfQ0FSVCwgY2FydCk7CiAgcmV0dXJuIG5ldyBQcm9taXNlKGZ1bmN0aW9uIChyZXNvbHZlKSB7CiAgICBBcGlTZXJ2aWNlWyJkZWxldGUiXSgiY2FydC8iICsgY2FydC5pZCkudGhlbihmdW5jdGlvbiAoX3JlZjgpIHsKICAgICAgdmFyIGRhdGEgPSBfcmVmOC5kYXRhOwogICAgICByZXNvbHZlKGRhdGEpOwogICAgfSlbImNhdGNoIl0oZnVuY3Rpb24gKF9yZWY5KSB7CiAgICAgIHZhciByZXNwb25zZSA9IF9yZWY5LnJlc3BvbnNlOwogICAgICBjb250ZXh0LmNvbW1pdChTRVRfRVJST1IsIHJlc3BvbnNlKTsKICAgIH0pOwogIH0pOwp9KSwgX2FjdGlvbnMpOwp2YXIgbXV0YXRpb25zID0gKF9tdXRhdGlvbnMgPSB7fSwgX2RlZmluZVByb3BlcnR5KF9tdXRhdGlvbnMsIFNFVF9FUlJPUiwgZnVuY3Rpb24gKHN0YXRlLCBlcnJvcikgewogIHN0YXRlLmVycm9ycyA9IGVycm9yOwp9KSwgX2RlZmluZVByb3BlcnR5KF9tdXRhdGlvbnMsIFNFVF9DQVJULCBmdW5jdGlvbiAoc3RhdGUsIGNhcnQpIHsKICBzdGF0ZS5lcnJvcnMgPSBudWxsOwogIHN0YXRlLmNhcnQgPSBjYXJ0Owp9KSwgX2RlZmluZVByb3BlcnR5KF9tdXRhdGlvbnMsIERFTEVURV9DQVJULCBmdW5jdGlvbiAoc3RhdGUsIGNhcnQpIHsKICBzdGF0ZS5jYXJ0ID0gc3RhdGUuY2FydC5maWx0ZXIoZnVuY3Rpb24gKGFydGljbGUpIHsKICAgIHJldHVybiBhcnRpY2xlLmlkICE9PSBjYXJ0LmlkOwogIH0pOwp9KSwgX211dGF0aW9ucyk7CmV4cG9ydCBkZWZhdWx0IHsKICBzdGF0ZTogc3RhdGUsCiAgYWN0aW9uczogYWN0aW9ucywKICBtdXRhdGlvbnM6IG11dGF0aW9ucywKICBnZXR0ZXJzOiBnZXR0ZXJzCn07"},{"version":3,"sources":["/home/marc/Escritorio/MCMeals/client.mcmeals.com/src/store/modules/cart.module.ts"],"names":[],"mappings":"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","sourcesContent":["import ApiService from \"@/common/api.service\";\nimport auth from \"./auth.module\";\nimport products from \"./products.module\";\nimport {\n    GET_CART,\n    ADD_CART,\n    ADD_CUSTOM_TO_CART,\n    UPDATE_CART,\n    REMOVE_CART,\n} from \"@/store/actions.type\";\nimport {\n  SET_ERROR,\n  SET_CART,\n  DELETE_CART,\n} from \"@/store/mutations.type\";\n\n\nconst state = {\n  errors: null,\n  cart: null,\n};\n\n\nconst getters = {\n  // Get user's cart\n  cart(state: any) {\n    return state.cart;\n  },\n\n  // Get cart subtotal\n  subtotal(state: any) {\n    let subtotal = 0;\n    state.cart.map((article: any) => {\n      subtotal += article.product.price * article.quantity;\n    })\n    return subtotal;\n  },\n};\n\n\nconst actions = {\n  // Get user's cart\n  [GET_CART](context: any) {\n    return new Promise(resolve => {\n      ApiService.get(\"cart/\" + auth.getters.user(auth.state).id)\n        .then(({ data }) => {\n          context.commit(SET_CART, data);\n          resolve(data);\n        })\n        .catch(({ response }) => {\n          context.commit(SET_ERROR, response);\n        });\n    });\n  },\n\n\n  // Add product to cart\n  [ADD_CART](context: any, quantity: number) {\n    const cart = {\n      user: auth.getters.user(auth.state),\n      product: products.getters.product(products.state),\n      quantity\n    };\n\n    return new Promise(resolve => {\n      ApiService.post(\"cart\", cart)\n        .then(({ data }) => {\n          resolve(data);\n        });\n    });\n  },\n\n\n  // Add custom meal to cart\n  [ADD_CUSTOM_TO_CART](context: any, data: any) {\n    data.user = auth.getters.user(auth.state);\n    return new Promise(resolve => {\n      ApiService.post(\"cart/custom\", data)\n        .then(({ data }) => {\n          resolve(data);\n        })\n        .catch(({ response }) => {\n          context.commit(SET_ERROR, response);\n        });\n    });\n  },\n\n\n  // Update cart quantity\n  [UPDATE_CART](context: any, data: any) {\n    const cart = data.article;\n    cart.quantity = data.quantity;\n    if (data.quantity === 0) {\n      context.commit(DELETE_CART, data.article);\n    }\n\n    return new Promise(resolve => {\n      ApiService.put(\"cart/\" + cart.id, cart)\n        .then(({ data }) => {\n          resolve(data);\n        })\n        .catch(({ response }) => {\n          context.commit(SET_ERROR, response);\n        });\n    });\n  },\n\n\n  // Remove from cart\n  [REMOVE_CART](context: any, cart: any) {\n    context.commit(DELETE_CART, cart);\n\n    return new Promise(resolve => {\n      ApiService.delete(\"cart/\" + cart.id)\n        .then(({ data }) => {\n          resolve(data);\n        })\n        .catch(({ response }) => {\n          context.commit(SET_ERROR, response);\n        });\n    });\n  },\n};\n\n\nconst mutations = {\n  // Set errors\n  [SET_ERROR](state: any, error: any) {\n    state.errors = error;\n  },\n\n  // Set user's cart\n  [SET_CART](state: any, cart: any) {\n    state.errors = null;\n    state.cart = cart;\n  },\n\n  // Delete from cart\n  [DELETE_CART](state: any, cart: any) {\n    state.cart = state.cart.filter((article: any) => article.id !== cart.id)\n  },\n};\n\n\nexport default {\n  state,\n  actions,\n  mutations,\n  getters\n};"],"sourceRoot":""}]}