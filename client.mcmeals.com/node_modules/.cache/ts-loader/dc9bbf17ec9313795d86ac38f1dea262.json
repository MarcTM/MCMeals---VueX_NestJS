{"remainingRequest":"/home/marc/Escritorio/MCMeals/client.mcmeals.com/node_modules/babel-loader/lib/index.js!/home/marc/Escritorio/MCMeals/client.mcmeals.com/node_modules/ts-loader/index.js??ref--13-2!/home/marc/Escritorio/MCMeals/client.mcmeals.com/src/store/modules/cart.module.ts","dependencies":[{"path":"/home/marc/Escritorio/MCMeals/client.mcmeals.com/src/store/modules/cart.module.ts","mtime":1621188566810},{"path":"/home/marc/Escritorio/MCMeals/client.mcmeals.com/node_modules/cache-loader/dist/cjs.js","mtime":1617103260404},{"path":"/home/marc/Escritorio/MCMeals/client.mcmeals.com/node_modules/babel-loader/lib/index.js","mtime":1617103260368},{"path":"/home/marc/Escritorio/MCMeals/client.mcmeals.com/node_modules/ts-loader/index.js","mtime":1617103261484}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuYXJyYXkuZmlsdGVyLmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuYXJyYXkubWFwLmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMub2JqZWN0LnRvLXN0cmluZy5qcyI7CmltcG9ydCBfZGVmaW5lUHJvcGVydHkgZnJvbSAiL2hvbWUvbWFyYy9Fc2NyaXRvcmlvL01DTWVhbHMvY2xpZW50Lm1jbWVhbHMuY29tL25vZGVfbW9kdWxlcy9AYmFiZWwvcnVudGltZS9oZWxwZXJzL2VzbS9kZWZpbmVQcm9wZXJ0eSI7Cgp2YXIgX2FjdGlvbnMsIF9tdXRhdGlvbnM7CgppbXBvcnQgQXBpU2VydmljZSBmcm9tICJAL2NvbW1vbi9hcGkuc2VydmljZSI7CmltcG9ydCBhdXRoIGZyb20gIi4vYXV0aC5tb2R1bGUiOwppbXBvcnQgcHJvZHVjdHMgZnJvbSAiLi9wcm9kdWN0cy5tb2R1bGUiOwppbXBvcnQgeyBHRVRfQ0FSVCwgQUREX0NBUlQsIEFERF9DVVNUT01fVE9fQ0FSVCwgVVBEQVRFX0NBUlQsIFJFTU9WRV9DQVJUIH0gZnJvbSAiQC9zdG9yZS9hY3Rpb25zLnR5cGUiOwppbXBvcnQgeyBTRVRfRVJST1IsIFNFVF9DQVJULCBERUxFVEVfQ0FSVCB9IGZyb20gIkAvc3RvcmUvbXV0YXRpb25zLnR5cGUiOwp2YXIgc3RhdGUgPSB7CiAgZXJyb3JzOiBudWxsLAogIGNhcnQ6IG51bGwKfTsKdmFyIGdldHRlcnMgPSB7CiAgLy8gR2V0IHVzZXIncyBjYXJ0CiAgY2FydDogZnVuY3Rpb24gY2FydChzdGF0ZSkgewogICAgcmV0dXJuIHN0YXRlLmNhcnQ7CiAgfSwKICAvLyBHZXQgY2FydCBzdWJ0b3RhbAogIHN1YnRvdGFsOiBmdW5jdGlvbiBzdWJ0b3RhbChzdGF0ZSkgewogICAgdmFyIHN1YnRvdGFsID0gMDsKICAgIHN0YXRlLmNhcnQubWFwKGZ1bmN0aW9uIChhcnRpY2xlKSB7CiAgICAgIHN1YnRvdGFsICs9IGFydGljbGUucHJvZHVjdC5wcmljZSAqIGFydGljbGUucXVhbnRpdHk7CiAgICB9KTsKICAgIHJldHVybiBzdWJ0b3RhbDsKICB9Cn07CnZhciBhY3Rpb25zID0gKF9hY3Rpb25zID0ge30sIF9kZWZpbmVQcm9wZXJ0eShfYWN0aW9ucywgR0VUX0NBUlQsIGZ1bmN0aW9uIChjb250ZXh0KSB7CiAgcmV0dXJuIG5ldyBQcm9taXNlKGZ1bmN0aW9uIChyZXNvbHZlKSB7CiAgICBBcGlTZXJ2aWNlLmdldCgiY2FydC8iICsgYXV0aC5nZXR0ZXJzLnVzZXIoYXV0aC5zdGF0ZSkuaWQpLnRoZW4oZnVuY3Rpb24gKF9yZWYpIHsKICAgICAgdmFyIGRhdGEgPSBfcmVmLmRhdGE7CiAgICAgIGNvbnNvbGUubG9nKGRhdGEpOwogICAgICBjb250ZXh0LmNvbW1pdChTRVRfQ0FSVCwgZGF0YSk7CiAgICAgIHJlc29sdmUoZGF0YSk7CiAgICB9KVsiY2F0Y2giXShmdW5jdGlvbiAoX3JlZjIpIHsKICAgICAgdmFyIHJlc3BvbnNlID0gX3JlZjIucmVzcG9uc2U7CiAgICAgIGNvbnRleHQuY29tbWl0KFNFVF9FUlJPUiwgcmVzcG9uc2UpOwogICAgfSk7CiAgfSk7Cn0pLCBfZGVmaW5lUHJvcGVydHkoX2FjdGlvbnMsIEFERF9DQVJULCBmdW5jdGlvbiAoY29udGV4dCwgcXVhbnRpdHkpIHsKICB2YXIgY2FydCA9IHsKICAgIHVzZXI6IGF1dGguZ2V0dGVycy51c2VyKGF1dGguc3RhdGUpLAogICAgcHJvZHVjdDogcHJvZHVjdHMuZ2V0dGVycy5wcm9kdWN0KHByb2R1Y3RzLnN0YXRlKSwKICAgIHF1YW50aXR5OiBxdWFudGl0eQogIH07CiAgcmV0dXJuIG5ldyBQcm9taXNlKGZ1bmN0aW9uIChyZXNvbHZlKSB7CiAgICBBcGlTZXJ2aWNlLnBvc3QoImNhcnQiLCBjYXJ0KS50aGVuKGZ1bmN0aW9uIChfcmVmMykgewogICAgICB2YXIgZGF0YSA9IF9yZWYzLmRhdGE7CiAgICAgIHJlc29sdmUoZGF0YSk7CiAgICB9KTsKICB9KTsKfSksIF9kZWZpbmVQcm9wZXJ0eShfYWN0aW9ucywgQUREX0NVU1RPTV9UT19DQVJULCBmdW5jdGlvbiAoY29udGV4dCwgZGF0YSkgewogIGRhdGEudXNlciA9IGF1dGguZ2V0dGVycy51c2VyKGF1dGguc3RhdGUpOwogIHJldHVybiBuZXcgUHJvbWlzZShmdW5jdGlvbiAocmVzb2x2ZSkgewogICAgQXBpU2VydmljZS5wb3N0KCJjYXJ0L2N1c3RvbSIsIGRhdGEpLnRoZW4oZnVuY3Rpb24gKF9yZWY0KSB7CiAgICAgIHZhciBkYXRhID0gX3JlZjQuZGF0YTsKICAgICAgcmVzb2x2ZShkYXRhKTsKICAgIH0pWyJjYXRjaCJdKGZ1bmN0aW9uIChfcmVmNSkgewogICAgICB2YXIgcmVzcG9uc2UgPSBfcmVmNS5yZXNwb25zZTsKICAgICAgY29udGV4dC5jb21taXQoU0VUX0VSUk9SLCByZXNwb25zZSk7CiAgICB9KTsKICB9KTsKfSksIF9kZWZpbmVQcm9wZXJ0eShfYWN0aW9ucywgVVBEQVRFX0NBUlQsIGZ1bmN0aW9uIChjb250ZXh0LCBkYXRhKSB7CiAgdmFyIGNhcnQgPSBkYXRhLmFydGljbGU7CiAgY2FydC5xdWFudGl0eSA9IGRhdGEucXVhbnRpdHk7CgogIGlmIChkYXRhLnF1YW50aXR5ID09PSAwKSB7CiAgICBjb250ZXh0LmNvbW1pdChERUxFVEVfQ0FSVCwgZGF0YS5hcnRpY2xlKTsKICB9CgogIHJldHVybiBuZXcgUHJvbWlzZShmdW5jdGlvbiAocmVzb2x2ZSkgewogICAgQXBpU2VydmljZS5wdXQoImNhcnQvIiArIGNhcnQuaWQsIGNhcnQpLnRoZW4oZnVuY3Rpb24gKF9yZWY2KSB7CiAgICAgIHZhciBkYXRhID0gX3JlZjYuZGF0YTsKICAgICAgcmVzb2x2ZShkYXRhKTsKICAgIH0pWyJjYXRjaCJdKGZ1bmN0aW9uIChfcmVmNykgewogICAgICB2YXIgcmVzcG9uc2UgPSBfcmVmNy5yZXNwb25zZTsKICAgICAgY29udGV4dC5jb21taXQoU0VUX0VSUk9SLCByZXNwb25zZSk7CiAgICB9KTsKICB9KTsKfSksIF9kZWZpbmVQcm9wZXJ0eShfYWN0aW9ucywgUkVNT1ZFX0NBUlQsIGZ1bmN0aW9uIChjb250ZXh0LCBjYXJ0KSB7CiAgY29udGV4dC5jb21taXQoREVMRVRFX0NBUlQsIGNhcnQpOwogIHJldHVybiBuZXcgUHJvbWlzZShmdW5jdGlvbiAocmVzb2x2ZSkgewogICAgQXBpU2VydmljZVsiZGVsZXRlIl0oImNhcnQvIiArIGNhcnQuaWQpLnRoZW4oZnVuY3Rpb24gKF9yZWY4KSB7CiAgICAgIHZhciBkYXRhID0gX3JlZjguZGF0YTsKICAgICAgcmVzb2x2ZShkYXRhKTsKICAgIH0pWyJjYXRjaCJdKGZ1bmN0aW9uIChfcmVmOSkgewogICAgICB2YXIgcmVzcG9uc2UgPSBfcmVmOS5yZXNwb25zZTsKICAgICAgY29udGV4dC5jb21taXQoU0VUX0VSUk9SLCByZXNwb25zZSk7CiAgICB9KTsKICB9KTsKfSksIF9hY3Rpb25zKTsKdmFyIG11dGF0aW9ucyA9IChfbXV0YXRpb25zID0ge30sIF9kZWZpbmVQcm9wZXJ0eShfbXV0YXRpb25zLCBTRVRfRVJST1IsIGZ1bmN0aW9uIChzdGF0ZSwgZXJyb3IpIHsKICBzdGF0ZS5lcnJvcnMgPSBlcnJvcjsKfSksIF9kZWZpbmVQcm9wZXJ0eShfbXV0YXRpb25zLCBTRVRfQ0FSVCwgZnVuY3Rpb24gKHN0YXRlLCBjYXJ0KSB7CiAgc3RhdGUuZXJyb3JzID0gbnVsbDsKICBzdGF0ZS5jYXJ0ID0gY2FydDsKfSksIF9kZWZpbmVQcm9wZXJ0eShfbXV0YXRpb25zLCBERUxFVEVfQ0FSVCwgZnVuY3Rpb24gKHN0YXRlLCBjYXJ0KSB7CiAgc3RhdGUuY2FydCA9IHN0YXRlLmNhcnQuZmlsdGVyKGZ1bmN0aW9uIChhcnRpY2xlKSB7CiAgICByZXR1cm4gYXJ0aWNsZS5pZCAhPT0gY2FydC5pZDsKICB9KTsKfSksIF9tdXRhdGlvbnMpOwpleHBvcnQgZGVmYXVsdCB7CiAgc3RhdGU6IHN0YXRlLAogIGFjdGlvbnM6IGFjdGlvbnMsCiAgbXV0YXRpb25zOiBtdXRhdGlvbnMsCiAgZ2V0dGVyczogZ2V0dGVycwp9Ow=="},{"version":3,"sources":["/home/marc/Escritorio/MCMeals/client.mcmeals.com/src/store/modules/cart.module.ts"],"names":[],"mappings":"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","sourcesContent":["import ApiService from \"@/common/api.service\";\nimport auth from \"./auth.module\";\nimport products from \"./products.module\";\nimport {\n    GET_CART,\n    ADD_CART,\n    ADD_CUSTOM_TO_CART,\n    UPDATE_CART,\n    REMOVE_CART,\n} from \"@/store/actions.type\";\nimport {\n  SET_ERROR,\n  SET_CART,\n  DELETE_CART,\n} from \"@/store/mutations.type\";\n\n\nconst state = {\n  errors: null,\n  cart: null,\n};\n\n\nconst getters = {\n  // Get user's cart\n  cart(state: any) {\n    return state.cart;\n  },\n\n  // Get cart subtotal\n  subtotal(state: any) {\n    let subtotal = 0;\n    state.cart.map((article: any) => {\n      subtotal += article.product.price * article.quantity;\n    })\n    return subtotal;\n  },\n};\n\n\nconst actions = {\n  // Get user's cart\n  [GET_CART](context: any) {\n    return new Promise(resolve => {\n      ApiService.get(\"cart/\" + auth.getters.user(auth.state).id)\n        .then(({ data }) => {\n          console.log(data);\n          context.commit(SET_CART, data);\n          resolve(data);\n        })\n        .catch(({ response }) => {\n          context.commit(SET_ERROR, response);\n        });\n    });\n  },\n\n\n  // Add product to cart\n  [ADD_CART](context: any, quantity: number) {\n    const cart = {\n      user: auth.getters.user(auth.state),\n      product: products.getters.product(products.state),\n      quantity\n    };\n\n    return new Promise(resolve => {\n      ApiService.post(\"cart\", cart)\n        .then(({ data }) => {\n          resolve(data);\n        });\n    });\n  },\n\n\n  // Add custom meal to cart\n  [ADD_CUSTOM_TO_CART](context: any, data: any) {\n    data.user = auth.getters.user(auth.state);\n    return new Promise(resolve => {\n      ApiService.post(\"cart/custom\", data)\n        .then(({ data }) => {\n          resolve(data);\n        })\n        .catch(({ response }) => {\n          context.commit(SET_ERROR, response);\n        });\n    });\n  },\n\n\n  // Update cart quantity\n  [UPDATE_CART](context: any, data: any) {\n    const cart = data.article;\n    cart.quantity = data.quantity;\n    if (data.quantity === 0) {\n      context.commit(DELETE_CART, data.article);\n    }\n\n    return new Promise(resolve => {\n      ApiService.put(\"cart/\" + cart.id, cart)\n        .then(({ data }) => {\n          resolve(data);\n        })\n        .catch(({ response }) => {\n          context.commit(SET_ERROR, response);\n        });\n    });\n  },\n\n\n  // Remove from cart\n  [REMOVE_CART](context: any, cart: any) {\n    context.commit(DELETE_CART, cart);\n\n    return new Promise(resolve => {\n      ApiService.delete(\"cart/\" + cart.id)\n        .then(({ data }) => {\n          resolve(data);\n        })\n        .catch(({ response }) => {\n          context.commit(SET_ERROR, response);\n        });\n    });\n  },\n};\n\n\nconst mutations = {\n  // Set errors\n  [SET_ERROR](state: any, error: any) {\n    state.errors = error;\n  },\n\n  // Set user's cart\n  [SET_CART](state: any, cart: any) {\n    state.errors = null;\n    state.cart = cart;\n  },\n\n  // Delete from cart\n  [DELETE_CART](state: any, cart: any) {\n    state.cart = state.cart.filter((article: any) => article.id !== cart.id)\n  },\n};\n\n\nexport default {\n  state,\n  actions,\n  mutations,\n  getters\n};"],"sourceRoot":""}]}