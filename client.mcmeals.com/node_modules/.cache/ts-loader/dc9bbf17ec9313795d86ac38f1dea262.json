{"remainingRequest":"/home/marc/Escritorio/MCMeals/client.mcmeals.com/node_modules/babel-loader/lib/index.js!/home/marc/Escritorio/MCMeals/client.mcmeals.com/node_modules/ts-loader/index.js??ref--13-2!/home/marc/Escritorio/MCMeals/client.mcmeals.com/src/store/modules/cart.module.ts","dependencies":[{"path":"/home/marc/Escritorio/MCMeals/client.mcmeals.com/src/store/modules/cart.module.ts","mtime":1619385858794},{"path":"/home/marc/Escritorio/MCMeals/client.mcmeals.com/node_modules/cache-loader/dist/cjs.js","mtime":1617103260404},{"path":"/home/marc/Escritorio/MCMeals/client.mcmeals.com/node_modules/babel-loader/lib/index.js","mtime":1617103260368},{"path":"/home/marc/Escritorio/MCMeals/client.mcmeals.com/node_modules/ts-loader/index.js","mtime":1617103261484}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMub2JqZWN0LnRvLXN0cmluZy5qcyI7CmltcG9ydCBfZGVmaW5lUHJvcGVydHkgZnJvbSAiL2hvbWUvbWFyYy9Fc2NyaXRvcmlvL01DTWVhbHMvY2xpZW50Lm1jbWVhbHMuY29tL25vZGVfbW9kdWxlcy9AYmFiZWwvcnVudGltZS9oZWxwZXJzL2VzbS9kZWZpbmVQcm9wZXJ0eSI7Cgp2YXIgX2FjdGlvbnMsIF9tdXRhdGlvbnM7CgppbXBvcnQgQXBpU2VydmljZSBmcm9tICJAL2NvbW1vbi9hcGkuc2VydmljZSI7CmltcG9ydCBhdXRoIGZyb20gIi4vYXV0aC5tb2R1bGUiOwppbXBvcnQgcHJvZHVjdHMgZnJvbSAiLi9wcm9kdWN0cy5tb2R1bGUiOwppbXBvcnQgeyBHRVRfQ0FSVCwgQUREX0NBUlQgfSBmcm9tICJAL3N0b3JlL2FjdGlvbnMudHlwZSI7CmltcG9ydCB7IFNFVF9FUlJPUiwgU0VUX0NBUlQgfSBmcm9tICJAL3N0b3JlL211dGF0aW9ucy50eXBlIjsKdmFyIHN0YXRlID0gewogIGVycm9yczogbnVsbCwKICBjYXJ0OiBudWxsCn07CnZhciBnZXR0ZXJzID0gewogIC8vIEdldCB1c2VyJ3MgY2FydAogIGNhcnQ6IGZ1bmN0aW9uIGNhcnQoc3RhdGUpIHsKICAgIHJldHVybiBzdGF0ZS5jYXJ0OwogIH0KfTsKdmFyIGFjdGlvbnMgPSAoX2FjdGlvbnMgPSB7fSwgX2RlZmluZVByb3BlcnR5KF9hY3Rpb25zLCBHRVRfQ0FSVCwgZnVuY3Rpb24gKGNvbnRleHQpIHsKICByZXR1cm4gbmV3IFByb21pc2UoZnVuY3Rpb24gKHJlc29sdmUpIHsKICAgIEFwaVNlcnZpY2UuZ2V0KCJjYXJ0LyIgKyBhdXRoLmdldHRlcnMudXNlcihhdXRoLnN0YXRlKS5pZCkudGhlbihmdW5jdGlvbiAoX3JlZikgewogICAgICB2YXIgZGF0YSA9IF9yZWYuZGF0YTsKICAgICAgY29uc29sZS5sb2coZGF0YSk7CiAgICAgIGNvbnRleHQuY29tbWl0KFNFVF9DQVJULCBkYXRhKTsKICAgICAgcmVzb2x2ZShkYXRhKTsKICAgIH0pWyJjYXRjaCJdKGZ1bmN0aW9uIChfcmVmMikgewogICAgICB2YXIgcmVzcG9uc2UgPSBfcmVmMi5yZXNwb25zZTsKICAgICAgY29udGV4dC5jb21taXQoU0VUX0VSUk9SLCByZXNwb25zZSk7CiAgICB9KTsKICB9KTsKfSksIF9kZWZpbmVQcm9wZXJ0eShfYWN0aW9ucywgQUREX0NBUlQsIGZ1bmN0aW9uIChjb250ZXh0LCBxdWFudGl0eSkgewogIHZhciBjYXJ0ID0gewogICAgdXNlcjogYXV0aC5nZXR0ZXJzLnVzZXIoYXV0aC5zdGF0ZSksCiAgICBwcm9kdWN0OiBwcm9kdWN0cy5nZXR0ZXJzLnByb2R1Y3QocHJvZHVjdHMuc3RhdGUpLAogICAgcXVhbnRpdHk6IHF1YW50aXR5CiAgfTsKICByZXR1cm4gbmV3IFByb21pc2UoZnVuY3Rpb24gKHJlc29sdmUpIHsKICAgIEFwaVNlcnZpY2UucG9zdCgiY2FydCIsIGNhcnQpLnRoZW4oZnVuY3Rpb24gKF9yZWYzKSB7CiAgICAgIHZhciBkYXRhID0gX3JlZjMuZGF0YTsKICAgICAgY29uc29sZS5sb2coZGF0YSk7IC8vIGNvbnRleHQuY29tbWl0KFNFVF9DQVJULCBkYXRhKTsKCiAgICAgIHJlc29sdmUoZGF0YSk7CiAgICB9KVsiY2F0Y2giXShmdW5jdGlvbiAoX3JlZjQpIHsKICAgICAgdmFyIHJlc3BvbnNlID0gX3JlZjQucmVzcG9uc2U7CiAgICAgIGNvbnNvbGUubG9nKHJlc3BvbnNlKTsgLy8gY29udGV4dC5jb21taXQoU0VUX0VSUk9SLCByZXNwb25zZSk7CiAgICB9KTsKICB9KTsKfSksIF9hY3Rpb25zKTsKdmFyIG11dGF0aW9ucyA9IChfbXV0YXRpb25zID0ge30sIF9kZWZpbmVQcm9wZXJ0eShfbXV0YXRpb25zLCBTRVRfRVJST1IsIGZ1bmN0aW9uIChzdGF0ZSwgZXJyb3IpIHsKICBzdGF0ZS5lcnJvcnMgPSBlcnJvcjsKfSksIF9kZWZpbmVQcm9wZXJ0eShfbXV0YXRpb25zLCBTRVRfQ0FSVCwgZnVuY3Rpb24gKHN0YXRlLCBjYXJ0KSB7CiAgc3RhdGUuZXJyb3JzID0gbnVsbDsKICBzdGF0ZS5jYXJ0ID0gY2FydDsKfSksIF9tdXRhdGlvbnMpOwpleHBvcnQgZGVmYXVsdCB7CiAgc3RhdGU6IHN0YXRlLAogIGFjdGlvbnM6IGFjdGlvbnMsCiAgbXV0YXRpb25zOiBtdXRhdGlvbnMsCiAgZ2V0dGVyczogZ2V0dGVycwp9Ow=="},{"version":3,"sources":["/home/marc/Escritorio/MCMeals/client.mcmeals.com/src/store/modules/cart.module.ts"],"names":[],"mappings":";;;;;AAAA,OAAO,UAAP,MAAuB,sBAAvB;AACA,OAAO,IAAP,MAAiB,eAAjB;AACA,OAAO,QAAP,MAAqB,mBAArB;AACA,SACI,QADJ,EAEI,QAFJ,QAGO,sBAHP;AAIA,SACE,SADF,EAEE,QAFF,QAGO,wBAHP;AAMA,IAAM,KAAK,GAAG;AACZ,EAAA,MAAM,EAAE,IADI;AAEZ,EAAA,IAAI,EAAE;AAFM,CAAd;AAMA,IAAM,OAAO,GAAG;AACd;AACA,EAAA,IAFc,gBAET,KAFS,EAEC;AACb,WAAO,KAAK,CAAC,IAAb;AACD;AAJa,CAAhB;AAQA,IAAM,OAAO,6CAEV,QAFU,YAEA,OAFA,EAEY;AACrB,SAAO,IAAI,OAAJ,CAAY,UAAA,OAAO,EAAG;AAC3B,IAAA,UAAU,CAAC,GAAX,CAAe,UAAU,IAAI,CAAC,OAAL,CAAa,IAAb,CAAkB,IAAI,CAAC,KAAvB,EAA8B,EAAvD,EACG,IADH,CACQ,gBAAa;AAAA,UAAV,IAAU,QAAV,IAAU;AACjB,MAAA,OAAO,CAAC,GAAR,CAAY,IAAZ;AACA,MAAA,OAAO,CAAC,MAAR,CAAe,QAAf,EAAyB,IAAzB;AACA,MAAA,OAAO,CAAC,IAAD,CAAP;AACD,KALH,WAMS,iBAAiB;AAAA,UAAd,QAAc,SAAd,QAAc;AACtB,MAAA,OAAO,CAAC,MAAR,CAAe,SAAf,EAA0B,QAA1B;AACD,KARH;AASD,GAVM,CAAP;AAWD,CAdU,6BAkBV,QAlBU,YAkBA,OAlBA,EAkBc,QAlBd,EAkB8B;AACvC,MAAM,IAAI,GAAG;AACX,IAAA,IAAI,EAAE,IAAI,CAAC,OAAL,CAAa,IAAb,CAAkB,IAAI,CAAC,KAAvB,CADK;AAEX,IAAA,OAAO,EAAE,QAAQ,CAAC,OAAT,CAAiB,OAAjB,CAAyB,QAAQ,CAAC,KAAlC,CAFE;AAGX,IAAA,QAAQ,EAAR;AAHW,GAAb;AAMA,SAAO,IAAI,OAAJ,CAAY,UAAA,OAAO,EAAG;AAC3B,IAAA,UAAU,CAAC,IAAX,CAAgB,MAAhB,EAAwB,IAAxB,EACG,IADH,CACQ,iBAAa;AAAA,UAAV,IAAU,SAAV,IAAU;AACjB,MAAA,OAAO,CAAC,GAAR,CAAY,IAAZ,EADiB,CAEjB;;AACA,MAAA,OAAO,CAAC,IAAD,CAAP;AACD,KALH,WAMS,iBAAiB;AAAA,UAAd,QAAc,SAAd,QAAc;AACtB,MAAA,OAAO,CAAC,GAAR,CAAY,QAAZ,EADsB,CAEtB;AACD,KATH;AAUD,GAXM,CAAP;AAYD,CArCU,YAAb;AAyCA,IAAM,SAAS,iDAEZ,SAFY,YAED,KAFC,EAEW,KAFX,EAEqB;AAChC,EAAA,KAAK,CAAC,MAAN,GAAe,KAAf;AACD,CAJY,+BAQZ,QARY,YAQF,KARE,EAQU,IARV,EAQmB;AAC9B,EAAA,KAAK,CAAC,MAAN,GAAe,IAAf;AACA,EAAA,KAAK,CAAC,IAAN,GAAa,IAAb;AACD,CAXY,cAAf;AAeA,eAAe;AACb,EAAA,KAAK,EAAL,KADa;AAEb,EAAA,OAAO,EAAP,OAFa;AAGb,EAAA,SAAS,EAAT,SAHa;AAIb,EAAA,OAAO,EAAP;AAJa,CAAf","sourcesContent":["import ApiService from \"@/common/api.service\";\nimport auth from \"./auth.module\";\nimport products from \"./products.module\";\nimport {\n    GET_CART,\n    ADD_CART,\n} from \"@/store/actions.type\";\nimport {\n  SET_ERROR,\n  SET_CART,\n} from \"@/store/mutations.type\";\n\n\nconst state = {\n  errors: null,\n  cart: null,\n};\n\n\nconst getters = {\n  // Get user's cart\n  cart(state: any) {\n    return state.cart;\n  },\n};\n\n\nconst actions = {\n  // Get user's cart\n  [GET_CART](context: any) {\n    return new Promise(resolve => {\n      ApiService.get(\"cart/\" + auth.getters.user(auth.state).id)\n        .then(({ data }) => {\n          console.log(data);\n          context.commit(SET_CART, data);\n          resolve(data);\n        })\n        .catch(({ response }) => {\n          context.commit(SET_ERROR, response);\n        });\n    });\n  },\n\n\n  // Add product to cart\n  [ADD_CART](context: any, quantity: number) {\n    const cart = {\n      user: auth.getters.user(auth.state),\n      product: products.getters.product(products.state),\n      quantity\n    };\n\n    return new Promise(resolve => {\n      ApiService.post(\"cart\", cart)\n        .then(({ data }) => {\n          console.log(data);\n          // context.commit(SET_CART, data);\n          resolve(data);\n        })\n        .catch(({ response }) => {\n          console.log(response);\n          // context.commit(SET_ERROR, response);\n        });\n    });\n  },\n};\n\n\nconst mutations = {\n  // Set errors\n  [SET_ERROR](state: any, error: any) {\n    state.errors = error;\n  },\n\n\n  // Set user's cart\n  [SET_CART](state: any, cart: any) {\n    state.errors = null;\n    state.cart = cart;\n  },\n};\n\n\nexport default {\n  state,\n  actions,\n  mutations,\n  getters\n};"],"sourceRoot":""}]}