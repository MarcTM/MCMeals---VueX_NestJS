{"remainingRequest":"/home/marc/Escritorio/MCMeals/client.mcmeals.com/node_modules/babel-loader/lib/index.js!/home/marc/Escritorio/MCMeals/client.mcmeals.com/node_modules/ts-loader/index.js??ref--13-2!/home/marc/Escritorio/MCMeals/client.mcmeals.com/src/store/modules/cart.module.ts","dependencies":[{"path":"/home/marc/Escritorio/MCMeals/client.mcmeals.com/src/store/modules/cart.module.ts","mtime":1619386422460},{"path":"/home/marc/Escritorio/MCMeals/client.mcmeals.com/node_modules/cache-loader/dist/cjs.js","mtime":1617103260404},{"path":"/home/marc/Escritorio/MCMeals/client.mcmeals.com/node_modules/babel-loader/lib/index.js","mtime":1617103260368},{"path":"/home/marc/Escritorio/MCMeals/client.mcmeals.com/node_modules/ts-loader/index.js","mtime":1617103261484}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMub2JqZWN0LnRvLXN0cmluZy5qcyI7CmltcG9ydCBfZGVmaW5lUHJvcGVydHkgZnJvbSAiL2hvbWUvbWFyYy9Fc2NyaXRvcmlvL01DTWVhbHMvY2xpZW50Lm1jbWVhbHMuY29tL25vZGVfbW9kdWxlcy9AYmFiZWwvcnVudGltZS9oZWxwZXJzL2VzbS9kZWZpbmVQcm9wZXJ0eSI7Cgp2YXIgX2FjdGlvbnMsIF9tdXRhdGlvbnM7CgppbXBvcnQgQXBpU2VydmljZSBmcm9tICJAL2NvbW1vbi9hcGkuc2VydmljZSI7CmltcG9ydCBhdXRoIGZyb20gIi4vYXV0aC5tb2R1bGUiOwppbXBvcnQgcHJvZHVjdHMgZnJvbSAiLi9wcm9kdWN0cy5tb2R1bGUiOwppbXBvcnQgeyBHRVRfQ0FSVCwgQUREX0NBUlQgfSBmcm9tICJAL3N0b3JlL2FjdGlvbnMudHlwZSI7CmltcG9ydCB7IFNFVF9FUlJPUiwgU0VUX0NBUlQgfSBmcm9tICJAL3N0b3JlL211dGF0aW9ucy50eXBlIjsKdmFyIHN0YXRlID0gewogIGVycm9yczogbnVsbCwKICBjYXJ0OiBudWxsCn07CnZhciBnZXR0ZXJzID0gewogIC8vIEdldCB1c2VyJ3MgY2FydAogIGNhcnQ6IGZ1bmN0aW9uIGNhcnQoc3RhdGUpIHsKICAgIHJldHVybiBzdGF0ZS5jYXJ0OwogIH0KfTsKdmFyIGFjdGlvbnMgPSAoX2FjdGlvbnMgPSB7fSwgX2RlZmluZVByb3BlcnR5KF9hY3Rpb25zLCBHRVRfQ0FSVCwgZnVuY3Rpb24gKGNvbnRleHQpIHsKICByZXR1cm4gbmV3IFByb21pc2UoZnVuY3Rpb24gKHJlc29sdmUpIHsKICAgIEFwaVNlcnZpY2UuZ2V0KCJjYXJ0LyIgKyBhdXRoLmdldHRlcnMudXNlcihhdXRoLnN0YXRlKS5pZCkudGhlbihmdW5jdGlvbiAoX3JlZikgewogICAgICB2YXIgZGF0YSA9IF9yZWYuZGF0YTsKICAgICAgY29udGV4dC5jb21taXQoU0VUX0NBUlQsIGRhdGEpOwogICAgICByZXNvbHZlKGRhdGEpOwogICAgfSlbImNhdGNoIl0oZnVuY3Rpb24gKF9yZWYyKSB7CiAgICAgIHZhciByZXNwb25zZSA9IF9yZWYyLnJlc3BvbnNlOwogICAgICBjb250ZXh0LmNvbW1pdChTRVRfRVJST1IsIHJlc3BvbnNlKTsKICAgIH0pOwogIH0pOwp9KSwgX2RlZmluZVByb3BlcnR5KF9hY3Rpb25zLCBBRERfQ0FSVCwgZnVuY3Rpb24gKGNvbnRleHQsIHF1YW50aXR5KSB7CiAgdmFyIGNhcnQgPSB7CiAgICB1c2VyOiBhdXRoLmdldHRlcnMudXNlcihhdXRoLnN0YXRlKSwKICAgIHByb2R1Y3Q6IHByb2R1Y3RzLmdldHRlcnMucHJvZHVjdChwcm9kdWN0cy5zdGF0ZSksCiAgICBxdWFudGl0eTogcXVhbnRpdHkKICB9OwogIHJldHVybiBuZXcgUHJvbWlzZShmdW5jdGlvbiAocmVzb2x2ZSkgewogICAgQXBpU2VydmljZS5wb3N0KCJjYXJ0IiwgY2FydCkudGhlbihmdW5jdGlvbiAoX3JlZjMpIHsKICAgICAgdmFyIGRhdGEgPSBfcmVmMy5kYXRhOwogICAgICByZXNvbHZlKGRhdGEpOwogICAgfSlbImNhdGNoIl0oZnVuY3Rpb24gKF9yZWY0KSB7CiAgICAgIHZhciByZXNwb25zZSA9IF9yZWY0LnJlc3BvbnNlOwogICAgICBjb250ZXh0LmNvbW1pdChTRVRfRVJST1IsIHJlc3BvbnNlKTsKICAgIH0pOwogIH0pOwp9KSwgX2FjdGlvbnMpOwp2YXIgbXV0YXRpb25zID0gKF9tdXRhdGlvbnMgPSB7fSwgX2RlZmluZVByb3BlcnR5KF9tdXRhdGlvbnMsIFNFVF9FUlJPUiwgZnVuY3Rpb24gKHN0YXRlLCBlcnJvcikgewogIHN0YXRlLmVycm9ycyA9IGVycm9yOwp9KSwgX2RlZmluZVByb3BlcnR5KF9tdXRhdGlvbnMsIFNFVF9DQVJULCBmdW5jdGlvbiAoc3RhdGUsIGNhcnQpIHsKICBzdGF0ZS5lcnJvcnMgPSBudWxsOwogIHN0YXRlLmNhcnQgPSBjYXJ0Owp9KSwgX211dGF0aW9ucyk7CmV4cG9ydCBkZWZhdWx0IHsKICBzdGF0ZTogc3RhdGUsCiAgYWN0aW9uczogYWN0aW9ucywKICBtdXRhdGlvbnM6IG11dGF0aW9ucywKICBnZXR0ZXJzOiBnZXR0ZXJzCn07"},{"version":3,"sources":["/home/marc/Escritorio/MCMeals/client.mcmeals.com/src/store/modules/cart.module.ts"],"names":[],"mappings":";;;;;AAAA,OAAO,UAAP,MAAuB,sBAAvB;AACA,OAAO,IAAP,MAAiB,eAAjB;AACA,OAAO,QAAP,MAAqB,mBAArB;AACA,SACI,QADJ,EAEI,QAFJ,QAGO,sBAHP;AAIA,SACE,SADF,EAEE,QAFF,QAGO,wBAHP;AAMA,IAAM,KAAK,GAAG;AACZ,EAAA,MAAM,EAAE,IADI;AAEZ,EAAA,IAAI,EAAE;AAFM,CAAd;AAMA,IAAM,OAAO,GAAG;AACd;AACA,EAAA,IAFc,gBAET,KAFS,EAEC;AACb,WAAO,KAAK,CAAC,IAAb;AACD;AAJa,CAAhB;AAQA,IAAM,OAAO,6CAEV,QAFU,YAEA,OAFA,EAEY;AACrB,SAAO,IAAI,OAAJ,CAAY,UAAA,OAAO,EAAG;AAC3B,IAAA,UAAU,CAAC,GAAX,CAAe,UAAU,IAAI,CAAC,OAAL,CAAa,IAAb,CAAkB,IAAI,CAAC,KAAvB,EAA8B,EAAvD,EACG,IADH,CACQ,gBAAa;AAAA,UAAV,IAAU,QAAV,IAAU;AACjB,MAAA,OAAO,CAAC,MAAR,CAAe,QAAf,EAAyB,IAAzB;AACA,MAAA,OAAO,CAAC,IAAD,CAAP;AACD,KAJH,WAKS,iBAAiB;AAAA,UAAd,QAAc,SAAd,QAAc;AACtB,MAAA,OAAO,CAAC,MAAR,CAAe,SAAf,EAA0B,QAA1B;AACD,KAPH;AAQD,GATM,CAAP;AAUD,CAbU,6BAiBV,QAjBU,YAiBA,OAjBA,EAiBc,QAjBd,EAiB8B;AACvC,MAAM,IAAI,GAAG;AACX,IAAA,IAAI,EAAE,IAAI,CAAC,OAAL,CAAa,IAAb,CAAkB,IAAI,CAAC,KAAvB,CADK;AAEX,IAAA,OAAO,EAAE,QAAQ,CAAC,OAAT,CAAiB,OAAjB,CAAyB,QAAQ,CAAC,KAAlC,CAFE;AAGX,IAAA,QAAQ,EAAR;AAHW,GAAb;AAMA,SAAO,IAAI,OAAJ,CAAY,UAAA,OAAO,EAAG;AAC3B,IAAA,UAAU,CAAC,IAAX,CAAgB,MAAhB,EAAwB,IAAxB,EACG,IADH,CACQ,iBAAa;AAAA,UAAV,IAAU,SAAV,IAAU;AACjB,MAAA,OAAO,CAAC,IAAD,CAAP;AACD,KAHH,WAIS,iBAAiB;AAAA,UAAd,QAAc,SAAd,QAAc;AACtB,MAAA,OAAO,CAAC,MAAR,CAAe,SAAf,EAA0B,QAA1B;AACD,KANH;AAOD,GARM,CAAP;AASD,CAjCU,YAAb;AAqCA,IAAM,SAAS,iDAEZ,SAFY,YAED,KAFC,EAEW,KAFX,EAEqB;AAChC,EAAA,KAAK,CAAC,MAAN,GAAe,KAAf;AACD,CAJY,+BAQZ,QARY,YAQF,KARE,EAQU,IARV,EAQmB;AAC9B,EAAA,KAAK,CAAC,MAAN,GAAe,IAAf;AACA,EAAA,KAAK,CAAC,IAAN,GAAa,IAAb;AACD,CAXY,cAAf;AAeA,eAAe;AACb,EAAA,KAAK,EAAL,KADa;AAEb,EAAA,OAAO,EAAP,OAFa;AAGb,EAAA,SAAS,EAAT,SAHa;AAIb,EAAA,OAAO,EAAP;AAJa,CAAf","sourcesContent":["import ApiService from \"@/common/api.service\";\nimport auth from \"./auth.module\";\nimport products from \"./products.module\";\nimport {\n    GET_CART,\n    ADD_CART,\n} from \"@/store/actions.type\";\nimport {\n  SET_ERROR,\n  SET_CART,\n} from \"@/store/mutations.type\";\n\n\nconst state = {\n  errors: null,\n  cart: null,\n};\n\n\nconst getters = {\n  // Get user's cart\n  cart(state: any) {\n    return state.cart;\n  },\n};\n\n\nconst actions = {\n  // Get user's cart\n  [GET_CART](context: any) {\n    return new Promise(resolve => {\n      ApiService.get(\"cart/\" + auth.getters.user(auth.state).id)\n        .then(({ data }) => {\n          context.commit(SET_CART, data);\n          resolve(data);\n        })\n        .catch(({ response }) => {\n          context.commit(SET_ERROR, response);\n        });\n    });\n  },\n\n\n  // Add product to cart\n  [ADD_CART](context: any, quantity: number) {\n    const cart = {\n      user: auth.getters.user(auth.state),\n      product: products.getters.product(products.state),\n      quantity\n    };\n\n    return new Promise(resolve => {\n      ApiService.post(\"cart\", cart)\n        .then(({ data }) => {\n          resolve(data);\n        })\n        .catch(({ response }) => {\n          context.commit(SET_ERROR, response);\n        });\n    });\n  },\n};\n\n\nconst mutations = {\n  // Set errors\n  [SET_ERROR](state: any, error: any) {\n    state.errors = error;\n  },\n\n\n  // Set user's cart\n  [SET_CART](state: any, cart: any) {\n    state.errors = null;\n    state.cart = cart;\n  },\n};\n\n\nexport default {\n  state,\n  actions,\n  mutations,\n  getters\n};"],"sourceRoot":""}]}