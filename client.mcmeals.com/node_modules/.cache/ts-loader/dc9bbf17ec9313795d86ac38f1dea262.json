{"remainingRequest":"/home/marc/Escritorio/MCMeals/client.mcmeals.com/node_modules/babel-loader/lib/index.js!/home/marc/Escritorio/MCMeals/client.mcmeals.com/node_modules/ts-loader/index.js??ref--13-2!/home/marc/Escritorio/MCMeals/client.mcmeals.com/src/store/modules/cart.module.ts","dependencies":[{"path":"/home/marc/Escritorio/MCMeals/client.mcmeals.com/src/store/modules/cart.module.ts","mtime":1619732495826},{"path":"/home/marc/Escritorio/MCMeals/client.mcmeals.com/node_modules/cache-loader/dist/cjs.js","mtime":1617103260404},{"path":"/home/marc/Escritorio/MCMeals/client.mcmeals.com/node_modules/babel-loader/lib/index.js","mtime":1617103260368},{"path":"/home/marc/Escritorio/MCMeals/client.mcmeals.com/node_modules/ts-loader/index.js","mtime":1617103261484}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuYXJyYXkuZmlsdGVyLmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuYXJyYXkubWFwLmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMub2JqZWN0LnRvLXN0cmluZy5qcyI7CmltcG9ydCBfZGVmaW5lUHJvcGVydHkgZnJvbSAiL2hvbWUvbWFyYy9Fc2NyaXRvcmlvL01DTWVhbHMvY2xpZW50Lm1jbWVhbHMuY29tL25vZGVfbW9kdWxlcy9AYmFiZWwvcnVudGltZS9oZWxwZXJzL2VzbS9kZWZpbmVQcm9wZXJ0eSI7Cgp2YXIgX2FjdGlvbnMsIF9tdXRhdGlvbnM7CgppbXBvcnQgQXBpU2VydmljZSBmcm9tICJAL2NvbW1vbi9hcGkuc2VydmljZSI7CmltcG9ydCBhdXRoIGZyb20gIi4vYXV0aC5tb2R1bGUiOwppbXBvcnQgcHJvZHVjdHMgZnJvbSAiLi9wcm9kdWN0cy5tb2R1bGUiOwppbXBvcnQgeyBHRVRfQ0FSVCwgQUREX0NBUlQsIFVQREFURV9DQVJULCBSRU1PVkVfQ0FSVCB9IGZyb20gIkAvc3RvcmUvYWN0aW9ucy50eXBlIjsKaW1wb3J0IHsgU0VUX0VSUk9SLCBTRVRfQ0FSVCwgREVMRVRFX0NBUlQgfSBmcm9tICJAL3N0b3JlL211dGF0aW9ucy50eXBlIjsKdmFyIHN0YXRlID0gewogIGVycm9yczogbnVsbCwKICBjYXJ0OiBudWxsCn07CnZhciBnZXR0ZXJzID0gewogIC8vIEdldCB1c2VyJ3MgY2FydAogIGNhcnQ6IGZ1bmN0aW9uIGNhcnQoc3RhdGUpIHsKICAgIHJldHVybiBzdGF0ZS5jYXJ0OwogIH0sCiAgLy8gR2V0IGNhcnQgc3VidG90YWwKICBzdWJ0b3RhbDogZnVuY3Rpb24gc3VidG90YWwoc3RhdGUpIHsKICAgIHZhciBzdWJ0b3RhbCA9IDA7CiAgICBzdGF0ZS5jYXJ0Lm1hcChmdW5jdGlvbiAoYXJ0aWNsZSkgewogICAgICBzdWJ0b3RhbCArPSBhcnRpY2xlLnByb2R1Y3QucHJpY2UgKiBhcnRpY2xlLnF1YW50aXR5OwogICAgfSk7CiAgICByZXR1cm4gc3VidG90YWw7CiAgfQp9Owp2YXIgYWN0aW9ucyA9IChfYWN0aW9ucyA9IHt9LCBfZGVmaW5lUHJvcGVydHkoX2FjdGlvbnMsIEdFVF9DQVJULCBmdW5jdGlvbiAoY29udGV4dCkgewogIHJldHVybiBuZXcgUHJvbWlzZShmdW5jdGlvbiAocmVzb2x2ZSkgewogICAgQXBpU2VydmljZS5nZXQoImNhcnQvIiArIGF1dGguZ2V0dGVycy51c2VyKGF1dGguc3RhdGUpLmlkKS50aGVuKGZ1bmN0aW9uIChfcmVmKSB7CiAgICAgIHZhciBkYXRhID0gX3JlZi5kYXRhOwogICAgICBjb25zb2xlLmxvZyhkYXRhKTsKICAgICAgY29udGV4dC5jb21taXQoU0VUX0NBUlQsIGRhdGEpOwogICAgICByZXNvbHZlKGRhdGEpOwogICAgfSlbImNhdGNoIl0oZnVuY3Rpb24gKF9yZWYyKSB7CiAgICAgIHZhciByZXNwb25zZSA9IF9yZWYyLnJlc3BvbnNlOwogICAgICBjb250ZXh0LmNvbW1pdChTRVRfRVJST1IsIHJlc3BvbnNlKTsKICAgIH0pOwogIH0pOwp9KSwgX2RlZmluZVByb3BlcnR5KF9hY3Rpb25zLCBBRERfQ0FSVCwgZnVuY3Rpb24gKGNvbnRleHQsIHF1YW50aXR5KSB7CiAgdmFyIGNhcnQgPSB7CiAgICB1c2VyOiBhdXRoLmdldHRlcnMudXNlcihhdXRoLnN0YXRlKSwKICAgIHByb2R1Y3Q6IHByb2R1Y3RzLmdldHRlcnMucHJvZHVjdChwcm9kdWN0cy5zdGF0ZSksCiAgICBxdWFudGl0eTogcXVhbnRpdHkKICB9OwogIHJldHVybiBuZXcgUHJvbWlzZShmdW5jdGlvbiAocmVzb2x2ZSkgewogICAgQXBpU2VydmljZS5wb3N0KCJjYXJ0IiwgY2FydCkudGhlbihmdW5jdGlvbiAoX3JlZjMpIHsKICAgICAgdmFyIGRhdGEgPSBfcmVmMy5kYXRhOwogICAgICByZXNvbHZlKGRhdGEpOwogICAgfSlbImNhdGNoIl0oZnVuY3Rpb24gKF9yZWY0KSB7CiAgICAgIHZhciByZXNwb25zZSA9IF9yZWY0LnJlc3BvbnNlOwogICAgICBjb250ZXh0LmNvbW1pdChTRVRfRVJST1IsIHJlc3BvbnNlKTsKICAgIH0pOwogIH0pOwp9KSwgX2RlZmluZVByb3BlcnR5KF9hY3Rpb25zLCBVUERBVEVfQ0FSVCwgZnVuY3Rpb24gKGNvbnRleHQsIGRhdGEpIHsKICB2YXIgY2FydCA9IGRhdGEuYXJ0aWNsZTsKICBjYXJ0LnF1YW50aXR5ID0gZGF0YS5xdWFudGl0eTsKCiAgaWYgKGRhdGEucXVhbnRpdHkgPT09IDApIHsKICAgIGNvbnRleHQuY29tbWl0KERFTEVURV9DQVJULCBkYXRhLmFydGljbGUpOwogIH0KCiAgcmV0dXJuIG5ldyBQcm9taXNlKGZ1bmN0aW9uIChyZXNvbHZlKSB7CiAgICBBcGlTZXJ2aWNlLnB1dCgiY2FydC8iICsgY2FydC5pZCwgY2FydCkudGhlbihmdW5jdGlvbiAoX3JlZjUpIHsKICAgICAgdmFyIGRhdGEgPSBfcmVmNS5kYXRhOwogICAgICByZXNvbHZlKGRhdGEpOwogICAgfSlbImNhdGNoIl0oZnVuY3Rpb24gKF9yZWY2KSB7CiAgICAgIHZhciByZXNwb25zZSA9IF9yZWY2LnJlc3BvbnNlOwogICAgICBjb250ZXh0LmNvbW1pdChTRVRfRVJST1IsIHJlc3BvbnNlKTsKICAgIH0pOwogIH0pOwp9KSwgX2RlZmluZVByb3BlcnR5KF9hY3Rpb25zLCBSRU1PVkVfQ0FSVCwgZnVuY3Rpb24gKGNvbnRleHQsIGNhcnQpIHsKICBjb250ZXh0LmNvbW1pdChERUxFVEVfQ0FSVCwgY2FydCk7CiAgcmV0dXJuIG5ldyBQcm9taXNlKGZ1bmN0aW9uIChyZXNvbHZlKSB7CiAgICBBcGlTZXJ2aWNlWyJkZWxldGUiXSgiY2FydC8iICsgY2FydC5pZCkudGhlbihmdW5jdGlvbiAoX3JlZjcpIHsKICAgICAgdmFyIGRhdGEgPSBfcmVmNy5kYXRhOwogICAgICByZXNvbHZlKGRhdGEpOwogICAgfSlbImNhdGNoIl0oZnVuY3Rpb24gKF9yZWY4KSB7CiAgICAgIHZhciByZXNwb25zZSA9IF9yZWY4LnJlc3BvbnNlOwogICAgICBjb250ZXh0LmNvbW1pdChTRVRfRVJST1IsIHJlc3BvbnNlKTsKICAgIH0pOwogIH0pOwp9KSwgX2FjdGlvbnMpOwp2YXIgbXV0YXRpb25zID0gKF9tdXRhdGlvbnMgPSB7fSwgX2RlZmluZVByb3BlcnR5KF9tdXRhdGlvbnMsIFNFVF9FUlJPUiwgZnVuY3Rpb24gKHN0YXRlLCBlcnJvcikgewogIHN0YXRlLmVycm9ycyA9IGVycm9yOwp9KSwgX2RlZmluZVByb3BlcnR5KF9tdXRhdGlvbnMsIFNFVF9DQVJULCBmdW5jdGlvbiAoc3RhdGUsIGNhcnQpIHsKICBzdGF0ZS5lcnJvcnMgPSBudWxsOwogIHN0YXRlLmNhcnQgPSBjYXJ0Owp9KSwgX2RlZmluZVByb3BlcnR5KF9tdXRhdGlvbnMsIERFTEVURV9DQVJULCBmdW5jdGlvbiAoc3RhdGUsIGNhcnQpIHsKICBzdGF0ZS5jYXJ0ID0gc3RhdGUuY2FydC5maWx0ZXIoZnVuY3Rpb24gKGFydGljbGUpIHsKICAgIHJldHVybiBhcnRpY2xlLmlkICE9PSBjYXJ0LmlkOwogIH0pOwp9KSwgX211dGF0aW9ucyk7CmV4cG9ydCBkZWZhdWx0IHsKICBzdGF0ZTogc3RhdGUsCiAgYWN0aW9uczogYWN0aW9ucywKICBtdXRhdGlvbnM6IG11dGF0aW9ucywKICBnZXR0ZXJzOiBnZXR0ZXJzCn07"},{"version":3,"sources":["/home/marc/Escritorio/MCMeals/client.mcmeals.com/src/store/modules/cart.module.ts"],"names":[],"mappings":"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","sourcesContent":["import ApiService from \"@/common/api.service\";\nimport auth from \"./auth.module\";\nimport products from \"./products.module\";\nimport {\n    GET_CART,\n    ADD_CART,\n    UPDATE_CART,\n    REMOVE_CART,\n} from \"@/store/actions.type\";\nimport {\n  SET_ERROR,\n  SET_CART,\n  DELETE_CART,\n} from \"@/store/mutations.type\";\n\n\nconst state = {\n  errors: null,\n  cart: null,\n};\n\n\nconst getters = {\n  // Get user's cart\n  cart(state: any) {\n    return state.cart;\n  },\n\n\n  // Get cart subtotal\n  subtotal(state: any) {\n    let subtotal = 0;\n    state.cart.map((article: any) => {\n      subtotal += article.product.price * article.quantity;\n    })\n    return subtotal;\n  },\n};\n\n\nconst actions = {\n  // Get user's cart\n  [GET_CART](context: any) {\n    return new Promise(resolve => {\n      ApiService.get(\"cart/\" + auth.getters.user(auth.state).id)\n        .then(({ data }) => {\n          console.log(data);\n          context.commit(SET_CART, data);\n          resolve(data);\n        })\n        .catch(({ response }) => {\n          context.commit(SET_ERROR, response);\n        });\n    });\n  },\n\n\n  // Add product to cart\n  [ADD_CART](context: any, quantity: number) {\n    const cart = {\n      user: auth.getters.user(auth.state),\n      product: products.getters.product(products.state),\n      quantity\n    };\n\n    return new Promise(resolve => {\n      ApiService.post(\"cart\", cart)\n        .then(({ data }) => {\n          resolve(data);\n        })\n        .catch(({ response }) => {\n          context.commit(SET_ERROR, response);\n        });\n    });\n  },\n\n\n  // Update cart quantity\n  [UPDATE_CART](context: any, data: any) {\n    const cart = data.article;\n    cart.quantity = data.quantity;\n    if (data.quantity === 0) {\n      context.commit(DELETE_CART, data.article);\n    }\n\n    return new Promise(resolve => {\n      ApiService.put(\"cart/\" + cart.id, cart)\n        .then(({ data }) => {\n          resolve(data);\n        })\n        .catch(({ response }) => {\n          context.commit(SET_ERROR, response);\n        });\n    });\n  },\n\n\n  // Remove from cart\n  [REMOVE_CART](context: any, cart: any) {\n    context.commit(DELETE_CART, cart);\n\n    return new Promise(resolve => {\n      ApiService.delete(\"cart/\" + cart.id)\n        .then(({ data }) => {\n          resolve(data);\n        })\n        .catch(({ response }) => {\n          context.commit(SET_ERROR, response);\n        });\n    });\n  },\n};\n\n\nconst mutations = {\n  // Set errors\n  [SET_ERROR](state: any, error: any) {\n    state.errors = error;\n  },\n\n\n  // Set user's cart\n  [SET_CART](state: any, cart: any) {\n    state.errors = null;\n    state.cart = cart;\n  },\n\n\n  // Delete from cart\n  [DELETE_CART](state: any, cart: any) {\n    state.cart = state.cart.filter((article: any) => article.id !== cart.id)\n  },\n};\n\n\nexport default {\n  state,\n  actions,\n  mutations,\n  getters\n};"],"sourceRoot":""}]}