{"remainingRequest":"/home/marc/Escritorio/MCMeals/client.mcmeals.com/node_modules/babel-loader/lib/index.js!/home/marc/Escritorio/MCMeals/client.mcmeals.com/node_modules/ts-loader/index.js??ref--13-2!/home/marc/Escritorio/MCMeals/client.mcmeals.com/src/store/auth.module.ts","dependencies":[{"path":"/home/marc/Escritorio/MCMeals/client.mcmeals.com/src/store/auth.module.ts","mtime":1618084829978},{"path":"/home/marc/Escritorio/MCMeals/client.mcmeals.com/node_modules/cache-loader/dist/cjs.js","mtime":1617103260404},{"path":"/home/marc/Escritorio/MCMeals/client.mcmeals.com/node_modules/babel-loader/lib/index.js","mtime":1617103260368},{"path":"/home/marc/Escritorio/MCMeals/client.mcmeals.com/node_modules/ts-loader/index.js","mtime":1617103261484}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMub2JqZWN0LnRvLXN0cmluZy5qcyI7CmltcG9ydCBfZGVmaW5lUHJvcGVydHkgZnJvbSAiL2hvbWUvbWFyYy9Fc2NyaXRvcmlvL01DTWVhbHMvY2xpZW50Lm1jbWVhbHMuY29tL25vZGVfbW9kdWxlcy9AYmFiZWwvcnVudGltZS9oZWxwZXJzL2VzbS9kZWZpbmVQcm9wZXJ0eSI7Cgp2YXIgX2FjdGlvbnMsIF9tdXRhdGlvbnM7CgppbXBvcnQgQXBpU2VydmljZSBmcm9tICJAL2NvbW1vbi9hcGkuc2VydmljZSI7CmltcG9ydCBKd3RTZXJ2aWNlIGZyb20gIkAvY29tbW9uL2p3dC5zZXJ2aWNlIjsKaW1wb3J0IHsgTE9HSU4sIExPR09VVCwgUkVHSVNURVIsIFZBTElEQVRFX1RPS0VOIH0gZnJvbSAiLi9hY3Rpb25zLnR5cGUiOwppbXBvcnQgeyBTRVRfQVVUSCwgUFVSR0VfQVVUSCwgU0VUX0VSUk9SIH0gZnJvbSAiLi9tdXRhdGlvbnMudHlwZSI7CnZhciBzdGF0ZSA9IHsKICBlcnJvcnM6IG51bGwsCiAgdXNlcjoge30sCiAgcHJvZmlsZToge30sCiAgY2FydDoge30sCiAgaXNBdXRoZW50aWNhdGVkOiAhIUp3dFNlcnZpY2UuZ2V0VG9rZW4oKQp9Owp2YXIgZ2V0dGVycyA9IHsKICAvLyBDdXJyZW50IHVzZXIKICBjdXJyZW50VXNlcjogZnVuY3Rpb24gY3VycmVudFVzZXIoc3RhdGUpIHsKICAgIHJldHVybiBzdGF0ZS51c2VyOwogIH0sCiAgLy8gSXMgYXV0aGVudGljYXRlZAogIGlzQXV0aGVudGljYXRlZDogZnVuY3Rpb24gaXNBdXRoZW50aWNhdGVkKHN0YXRlKSB7CiAgICByZXR1cm4gc3RhdGUuaXNBdXRoZW50aWNhdGVkOwogIH0sCiAgLy8gR2V0IGVycm9ycwogIGdldEVycm9yczogZnVuY3Rpb24gZ2V0RXJyb3JzKHN0YXRlKSB7CiAgICByZXR1cm4gc3RhdGUuZXJyb3JzOwogIH0sCiAgLy8gR2V0IHByb2ZpbGUKICBwcm9maWxlOiBmdW5jdGlvbiBwcm9maWxlKHN0YXRlKSB7CiAgICByZXR1cm4gc3RhdGUucHJvZmlsZTsKICB9LAogIC8vIEdldCBjYXJ0CiAgY2FydDogZnVuY3Rpb24gY2FydChzdGF0ZSkgewogICAgcmV0dXJuIHN0YXRlLmNhcnQ7CiAgfQp9Owp2YXIgYWN0aW9ucyA9IChfYWN0aW9ucyA9IHt9LCBfZGVmaW5lUHJvcGVydHkoX2FjdGlvbnMsIExPR0lOLCBmdW5jdGlvbiAoY29udGV4dCwgY3JlZGVudGlhbHMpIHsKICByZXR1cm4gbmV3IFByb21pc2UoZnVuY3Rpb24gKHJlc29sdmUpIHsKICAgIEFwaVNlcnZpY2UucG9zdCgiYXV0aC9sb2dpbiIsIGNyZWRlbnRpYWxzKS50aGVuKGZ1bmN0aW9uIChfcmVmKSB7CiAgICAgIHZhciBkYXRhID0gX3JlZi5kYXRhOwogICAgICBjb250ZXh0LmNvbW1pdChTRVRfQVVUSCwgZGF0YS51c2VyLCBkYXRhLnRva2VuKTsKICAgICAgcmVzb2x2ZShkYXRhKTsKICAgIH0pWyJjYXRjaCJdKGZ1bmN0aW9uIChfcmVmMikgewogICAgICB2YXIgcmVzcG9uc2UgPSBfcmVmMi5yZXNwb25zZTsKICAgICAgY29uc29sZS5sb2cocmVzcG9uc2UuZGF0YS5ub25fZmllbGRfZXJyb3JzKTsKICAgICAgY29udGV4dC5jb21taXQoU0VUX0VSUk9SLCByZXNwb25zZS5kYXRhLm5vbl9maWVsZF9lcnJvcnMpOwogICAgfSk7CiAgfSk7Cn0pLCBfZGVmaW5lUHJvcGVydHkoX2FjdGlvbnMsIExPR09VVCwgZnVuY3Rpb24gKGNvbnRleHQpIHsKICBjb250ZXh0LmNvbW1pdChQVVJHRV9BVVRIKTsKfSksIF9kZWZpbmVQcm9wZXJ0eShfYWN0aW9ucywgUkVHSVNURVIsIGZ1bmN0aW9uIChjb250ZXh0LCBjcmVkZW50aWFscykgewogIHJldHVybiBuZXcgUHJvbWlzZShmdW5jdGlvbiAocmVzb2x2ZSwgcmVqZWN0KSB7CiAgICBBcGlTZXJ2aWNlLnBvc3QoInVzZXJzIiwgY3JlZGVudGlhbHMpLnRoZW4oZnVuY3Rpb24gKF9yZWYzKSB7CiAgICAgIHZhciBkYXRhID0gX3JlZjMuZGF0YTsKICAgICAgcmVzb2x2ZShkYXRhKTsKICAgIH0pWyJjYXRjaCJdKGZ1bmN0aW9uIChfcmVmNCkgewogICAgICB2YXIgcmVzcG9uc2UgPSBfcmVmNC5yZXNwb25zZTsKICAgICAgY29udGV4dC5jb21taXQoU0VUX0VSUk9SLCByZXNwb25zZS5kYXRhKTsKICAgICAgcmVqZWN0KHJlc3BvbnNlKTsKICAgIH0pOwogIH0pOwp9KSwgX2RlZmluZVByb3BlcnR5KF9hY3Rpb25zLCBWQUxJREFURV9UT0tFTiwgZnVuY3Rpb24gKGNvbnRleHQpIHsKICBpZiAoSnd0U2VydmljZS5nZXRUb2tlbigpKSB7CiAgICBBcGlTZXJ2aWNlLmdldCgidXNlcnMvdmFsaWRhdGUiLCB0cnVlKVsiY2F0Y2giXShmdW5jdGlvbiAoX3JlZjUpIHsKICAgICAgdmFyIHJlc3BvbnNlID0gX3JlZjUucmVzcG9uc2U7CiAgICAgIGNvbnNvbGUubG9nKHJlc3BvbnNlKTsKICAgICAgY29udGV4dC5jb21taXQoUFVSR0VfQVVUSCk7CiAgICB9KTsKICB9IGVsc2UgewogICAgY29udGV4dC5jb21taXQoUFVSR0VfQVVUSCk7CiAgfQp9KSwgX2FjdGlvbnMpOwp2YXIgbXV0YXRpb25zID0gKF9tdXRhdGlvbnMgPSB7fSwgX2RlZmluZVByb3BlcnR5KF9tdXRhdGlvbnMsIFNFVF9FUlJPUiwgZnVuY3Rpb24gKHN0YXRlLCBlcnJvcikgewogIHN0YXRlLmVycm9ycyA9IGVycm9yOwp9KSwgX2RlZmluZVByb3BlcnR5KF9tdXRhdGlvbnMsIFNFVF9BVVRILCBmdW5jdGlvbiAoc3RhdGUsIHVzZXIsIHRva2VuKSB7CiAgc3RhdGUuaXNBdXRoZW50aWNhdGVkID0gdHJ1ZTsKICBzdGF0ZS5lcnJvcnMgPSB7fTsKICBzdGF0ZS51c2VyID0gdXNlcjsKICBKd3RTZXJ2aWNlLnNhdmVUb2tlbih0b2tlbik7Cn0pLCBfZGVmaW5lUHJvcGVydHkoX211dGF0aW9ucywgUFVSR0VfQVVUSCwgZnVuY3Rpb24gKHN0YXRlKSB7CiAgc3RhdGUuaXNBdXRoZW50aWNhdGVkID0gZmFsc2U7CiAgc3RhdGUudXNlciA9IHt9OwogIHN0YXRlLmVycm9ycyA9IHt9OwogIEp3dFNlcnZpY2UuZGVzdHJveVRva2VuKCk7Cn0pLCBfbXV0YXRpb25zKTsKZXhwb3J0IGRlZmF1bHQgewogIHN0YXRlOiBzdGF0ZSwKICBhY3Rpb25zOiBhY3Rpb25zLAogIG11dGF0aW9uczogbXV0YXRpb25zLAogIGdldHRlcnM6IGdldHRlcnMKfTs="},{"version":3,"sources":["/home/marc/Escritorio/MCMeals/client.mcmeals.com/src/store/auth.module.ts"],"names":[],"mappings":"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","sourcesContent":["import ApiService from \"@/common/api.service\";\nimport JwtService from \"@/common/jwt.service\";\nimport {\n  LOGIN,\n  LOGOUT,\n  REGISTER,\n  VALIDATE_TOKEN,\n} from \"./actions.type\";\nimport {\n  SET_AUTH,\n  PURGE_AUTH,\n  SET_ERROR,\n} from \"./mutations.type\";\n\n\nconst state = {\n  errors: null,\n  user: {},\n  profile: {},\n  cart: {},\n  isAuthenticated: !!JwtService.getToken()\n};\n\n\nconst getters = {\n  // Current user\n  currentUser(state: any) {\n    return state.user;\n  },\n\n  // Is authenticated\n  isAuthenticated(state: any) {\n    return state.isAuthenticated;\n  },\n\n  // Get errors\n  getErrors(state: any) {\n    return state.errors;\n  },\n\n  // Get profile\n  profile(state: any) {\n    return state.profile;\n  },\n\n  // Get cart\n  cart(state: any) {\n    return state.cart;\n  }\n};\n\n\nconst actions = {\n  // Login\n  [LOGIN](context: any, credentials: any) {\n    return new Promise(resolve => {\n      ApiService.post(\"auth/login\", credentials)\n        .then(({ data }) => {\n          context.commit(SET_AUTH, data.user, data.token);\n          resolve(data);\n        })\n        .catch(({ response }) => {\n          console.log(response.data.non_field_errors);\n          context.commit(SET_ERROR, response.data.non_field_errors);\n        });\n    });\n  },\n\n\n  // Logout\n  [LOGOUT](context: any) {\n    context.commit(PURGE_AUTH);\n  },\n\n\n  // Register\n  [REGISTER](context: any, credentials: any) {\n    return new Promise((resolve, reject) => {\n      ApiService.post(\"users\", credentials)\n        .then(({ data }) => {\n          resolve(data);\n        })\n        .catch(({ response }) => {\n          context.commit(SET_ERROR, response.data);\n          reject(response);\n        });\n    });\n  },\n\n\n  // Check auth\n  [VALIDATE_TOKEN](context: any) {\n    if (JwtService.getToken()) {\n      ApiService.get(\"users/validate\", true)\n        .catch(({ response }) => {\n          console.log(response);\n          context.commit(PURGE_AUTH);\n        });\n    } else {\n      context.commit(PURGE_AUTH);\n    }\n  },\n};\n\n\nconst mutations = {\n  // Set errors\n  [SET_ERROR](state: any, error: any) {\n    state.errors = error;\n  },\n\n\n  // Set auth\n  [SET_AUTH](state: any, user: object, token: string) {\n    state.isAuthenticated = true;\n    state.errors = {};\n    state.user = user;\n    JwtService.saveToken(token);\n  },\n\n  \n  // Purge auth\n  [PURGE_AUTH](state: any) {\n    state.isAuthenticated = false;\n    state.user = {};\n    state.errors = {};\n    JwtService.destroyToken();\n  },\n};\n\n\nexport default {\n  state,\n  actions,\n  mutations,\n  getters\n};"],"sourceRoot":""}]}