{"remainingRequest":"/home/marc/Escritorio/MCMeals/client.mcmeals.com/node_modules/babel-loader/lib/index.js!/home/marc/Escritorio/MCMeals/client.mcmeals.com/node_modules/ts-loader/index.js??ref--13-2!/home/marc/Escritorio/MCMeals/client.mcmeals.com/src/store/auth.module.ts","dependencies":[{"path":"/home/marc/Escritorio/MCMeals/client.mcmeals.com/src/store/auth.module.ts","mtime":1616921212838},{"path":"/home/marc/Escritorio/MCMeals/client.mcmeals.com/node_modules/cache-loader/dist/cjs.js","mtime":1616919958509},{"path":"/home/marc/Escritorio/MCMeals/client.mcmeals.com/node_modules/babel-loader/lib/index.js","mtime":1616919958477},{"path":"/home/marc/Escritorio/MCMeals/client.mcmeals.com/node_modules/ts-loader/index.js","mtime":1616919959649}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMub2JqZWN0LnRvLXN0cmluZy5qcyI7CmltcG9ydCBfZGVmaW5lUHJvcGVydHkgZnJvbSAiL2hvbWUvbWFyYy9Fc2NyaXRvcmlvL01DTWVhbHMvY2xpZW50Lm1jbWVhbHMuY29tL25vZGVfbW9kdWxlcy9AYmFiZWwvcnVudGltZS9oZWxwZXJzL2VzbS9kZWZpbmVQcm9wZXJ0eSI7Cgp2YXIgX2FjdGlvbnMsIF9tdXRhdGlvbnM7CgppbXBvcnQgQXBpU2VydmljZSBmcm9tICJAL2NvbW1vbi9hcGkuc2VydmljZSI7CmltcG9ydCBKd3RTZXJ2aWNlIGZyb20gIkAvY29tbW9uL2p3dC5zZXJ2aWNlIjsKaW1wb3J0IHsgTE9HSU4sIExPR09VVCwgUkVHSVNURVIsIFZBTElEQVRFLCBHRVRfUFJPRklMRSB9IGZyb20gIi4vYWN0aW9ucy50eXBlIjsKaW1wb3J0IHsgU0VUX0FVVEgsIFBVUkdFX0FVVEgsIFNFVF9FUlJPUiwgU0VUX1BST0ZJTEUgfSBmcm9tICIuL211dGF0aW9ucy50eXBlIjsKdmFyIHN0YXRlID0gewogIGVycm9yczogbnVsbCwKICB1c2VyOiB7fSwKICBwcm9maWxlOiB7fSwKICBjYXJ0OiB7fSwKICBpc0F1dGhlbnRpY2F0ZWQ6ICEhSnd0U2VydmljZS5nZXRUb2tlbigpCn07CnZhciBnZXR0ZXJzID0gewogIC8vIEN1cnJlbnQgdXNlcgogIGN1cnJlbnRVc2VyOiBmdW5jdGlvbiBjdXJyZW50VXNlcihzdGF0ZSkgewogICAgcmV0dXJuIHN0YXRlLnVzZXI7CiAgfSwKICAvLyBJcyBhdXRoZW50aWNhdGVkCiAgaXNBdXRoZW50aWNhdGVkOiBmdW5jdGlvbiBpc0F1dGhlbnRpY2F0ZWQoc3RhdGUpIHsKICAgIHJldHVybiBzdGF0ZS5pc0F1dGhlbnRpY2F0ZWQ7CiAgfSwKICAvLyBHZXQgZXJyb3JzCiAgZ2V0RXJyb3JzOiBmdW5jdGlvbiBnZXRFcnJvcnMoc3RhdGUpIHsKICAgIHJldHVybiBzdGF0ZS5lcnJvcnM7CiAgfSwKICAvLyBHZXQgcHJvZmlsZQogIHByb2ZpbGU6IGZ1bmN0aW9uIHByb2ZpbGUoc3RhdGUpIHsKICAgIHJldHVybiBzdGF0ZS5wcm9maWxlOwogIH0sCiAgLy8gR2V0IGNhcnQKICBjYXJ0OiBmdW5jdGlvbiBjYXJ0KHN0YXRlKSB7CiAgICByZXR1cm4gc3RhdGUuY2FydDsKICB9Cn07CnZhciBhY3Rpb25zID0gKF9hY3Rpb25zID0ge30sIF9kZWZpbmVQcm9wZXJ0eShfYWN0aW9ucywgTE9HSU4sIGZ1bmN0aW9uIChjb250ZXh0LCBjcmVkZW50aWFscykgewogIGNvbnNvbGUubG9nKGNyZWRlbnRpYWxzKTsKICByZXR1cm4gbmV3IFByb21pc2UoZnVuY3Rpb24gKHJlc29sdmUpIHsKICAgIEFwaVNlcnZpY2UucG9zdCgidXNlcnMvbG9naW4iLCBjcmVkZW50aWFscykudGhlbihmdW5jdGlvbiAoX3JlZikgewogICAgICB2YXIgZGF0YSA9IF9yZWYuZGF0YTsKICAgICAgY29udGV4dC5jb21taXQoU0VUX0FVVEgsIGRhdGEudG9rZW4pOwogICAgICByZXNvbHZlKGRhdGEpOwogICAgfSlbImNhdGNoIl0oZnVuY3Rpb24gKF9yZWYyKSB7CiAgICAgIHZhciByZXNwb25zZSA9IF9yZWYyLnJlc3BvbnNlOwogICAgICBjb25zb2xlLmxvZyhyZXNwb25zZS5kYXRhLm5vbl9maWVsZF9lcnJvcnMpOwogICAgICBjb250ZXh0LmNvbW1pdChTRVRfRVJST1IsIHJlc3BvbnNlLmRhdGEubm9uX2ZpZWxkX2Vycm9ycyk7CiAgICB9KTsKICB9KTsKfSksIF9kZWZpbmVQcm9wZXJ0eShfYWN0aW9ucywgTE9HT1VULCBmdW5jdGlvbiAoY29udGV4dCkgewogIGNvbnRleHQuY29tbWl0KFBVUkdFX0FVVEgpOwp9KSwgX2RlZmluZVByb3BlcnR5KF9hY3Rpb25zLCBSRUdJU1RFUiwgZnVuY3Rpb24gKGNvbnRleHQsIGNyZWRlbnRpYWxzKSB7CiAgcmV0dXJuIG5ldyBQcm9taXNlKGZ1bmN0aW9uIChyZXNvbHZlLCByZWplY3QpIHsKICAgIEFwaVNlcnZpY2UucG9zdCgidXNlcnMiLCBjcmVkZW50aWFscykudGhlbihmdW5jdGlvbiAoX3JlZjMpIHsKICAgICAgdmFyIGRhdGEgPSBfcmVmMy5kYXRhOwogICAgICByZXNvbHZlKGRhdGEpOwogICAgfSlbImNhdGNoIl0oZnVuY3Rpb24gKF9yZWY0KSB7CiAgICAgIHZhciByZXNwb25zZSA9IF9yZWY0LnJlc3BvbnNlOwogICAgICBjb250ZXh0LmNvbW1pdChTRVRfRVJST1IsIHJlc3BvbnNlLmRhdGEpOwogICAgICByZWplY3QocmVzcG9uc2UpOwogICAgfSk7CiAgfSk7Cn0pLCBfZGVmaW5lUHJvcGVydHkoX2FjdGlvbnMsIFZBTElEQVRFLCBmdW5jdGlvbiAoY29udGV4dCkgewogIGlmIChKd3RTZXJ2aWNlLmdldFRva2VuKCkpIHsKICAgIEFwaVNlcnZpY2UuZ2V0KCJ1c2Vycy92YWxpZGF0ZSIsIHRydWUpWyJjYXRjaCJdKGZ1bmN0aW9uIChfcmVmNSkgewogICAgICB2YXIgcmVzcG9uc2UgPSBfcmVmNS5yZXNwb25zZTsKICAgICAgY29uc29sZS5sb2cocmVzcG9uc2UpOwogICAgICBjb250ZXh0LmNvbW1pdChQVVJHRV9BVVRIKTsKICAgIH0pOwogIH0gZWxzZSB7CiAgICBjb250ZXh0LmNvbW1pdChQVVJHRV9BVVRIKTsKICB9Cn0pLCBfZGVmaW5lUHJvcGVydHkoX2FjdGlvbnMsIEdFVF9QUk9GSUxFLCBmdW5jdGlvbiAoY29udGV4dCkgewogIHJldHVybiBuZXcgUHJvbWlzZShmdW5jdGlvbiAocmVzb2x2ZSkgewogICAgQXBpU2VydmljZS5nZXQoInVzZXJzL3Byb2ZpbGUiLCB0cnVlKS50aGVuKGZ1bmN0aW9uIChfcmVmNikgewogICAgICB2YXIgZGF0YSA9IF9yZWY2LmRhdGE7CiAgICAgIGNvbnRleHQuY29tbWl0KFNFVF9QUk9GSUxFLCBkYXRhKTsKICAgICAgcmVzb2x2ZShkYXRhKTsKICAgIH0pWyJjYXRjaCJdKGZ1bmN0aW9uIChfcmVmNykgewogICAgICB2YXIgcmVzcG9uc2UgPSBfcmVmNy5yZXNwb25zZTsKICAgICAgY29udGV4dC5jb21taXQoU0VUX0VSUk9SLCByZXNwb25zZSk7CiAgICB9KTsKICB9KTsKfSksIF9hY3Rpb25zKTsKdmFyIG11dGF0aW9ucyA9IChfbXV0YXRpb25zID0ge30sIF9kZWZpbmVQcm9wZXJ0eShfbXV0YXRpb25zLCBTRVRfRVJST1IsIGZ1bmN0aW9uIChzdGF0ZSwgZXJyb3IpIHsKICBzdGF0ZS5lcnJvcnMgPSBlcnJvcjsKfSksIF9kZWZpbmVQcm9wZXJ0eShfbXV0YXRpb25zLCBTRVRfQVVUSCwgZnVuY3Rpb24gKHN0YXRlLCB0b2tlbikgewogIHN0YXRlLmlzQXV0aGVudGljYXRlZCA9IHRydWU7CiAgc3RhdGUudXNlci50b2tlbiA9IHRva2VuOwogIHN0YXRlLmVycm9ycyA9IHt9OwogIEp3dFNlcnZpY2Uuc2F2ZVRva2VuKHN0YXRlLnVzZXIudG9rZW4pOwp9KSwgX2RlZmluZVByb3BlcnR5KF9tdXRhdGlvbnMsIFBVUkdFX0FVVEgsIGZ1bmN0aW9uIChzdGF0ZSkgewogIHN0YXRlLmlzQXV0aGVudGljYXRlZCA9IGZhbHNlOwogIHN0YXRlLnVzZXIgPSB7fTsKICBzdGF0ZS5lcnJvcnMgPSB7fTsKICBKd3RTZXJ2aWNlLmRlc3Ryb3lUb2tlbigpOwp9KSwgX2RlZmluZVByb3BlcnR5KF9tdXRhdGlvbnMsIFNFVF9QUk9GSUxFLCBmdW5jdGlvbiAoc3RhdGUsIHByb2ZpbGUpIHsKICBzdGF0ZS5wcm9maWxlID0gcHJvZmlsZTsKICBzdGF0ZS5lcnJvcnMgPSB7fTsKfSksIF9tdXRhdGlvbnMpOwpleHBvcnQgZGVmYXVsdCB7CiAgc3RhdGU6IHN0YXRlLAogIGFjdGlvbnM6IGFjdGlvbnMsCiAgbXV0YXRpb25zOiBtdXRhdGlvbnMsCiAgZ2V0dGVyczogZ2V0dGVycwp9Ow=="},{"version":3,"sources":["/home/marc/Escritorio/MCMeals/client.mcmeals.com/src/store/auth.module.ts"],"names":[],"mappings":"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","sourcesContent":["import ApiService from \"@/common/api.service\";\nimport JwtService from \"@/common/jwt.service\";\nimport {\n  LOGIN,\n  LOGOUT,\n  REGISTER,\n  VALIDATE,\n  GET_PROFILE,\n} from \"./actions.type\";\nimport {\n  SET_AUTH,\n  PURGE_AUTH,\n  SET_ERROR,\n  SET_PROFILE,\n} from \"./mutations.type\";\n\n\nconst state = {\n  errors: null,\n  user: {},\n  profile: {},\n  cart: {},\n  isAuthenticated: !!JwtService.getToken()\n};\n\n\nconst getters = {\n  // Current user\n  currentUser(state: any) {\n    return state.user;\n  },\n\n  // Is authenticated\n  isAuthenticated(state: any) {\n    return state.isAuthenticated;\n  },\n\n  // Get errors\n  getErrors(state: any) {\n    return state.errors;\n  },\n\n  // Get profile\n  profile(state: any) {\n    return state.profile;\n  },\n\n  // Get cart\n  cart(state: any) {\n    return state.cart;\n  }\n};\n\n\nconst actions = {\n  // Login\n  [LOGIN](context: any, credentials: any) {\n    console.log(credentials);\n    return new Promise(resolve => {\n      ApiService.post(\"users/login\", credentials)\n        .then(({ data }) => {\n          context.commit(SET_AUTH, data.token);\n          resolve(data);\n        })\n        .catch(({ response }) => {\n          console.log(response.data.non_field_errors);\n          context.commit(SET_ERROR, response.data.non_field_errors);\n        });\n    });\n  },\n\n\n  // Logout\n  [LOGOUT](context: any) {\n    context.commit(PURGE_AUTH);\n  },\n\n\n  // Register\n  [REGISTER](context: any, credentials: any) {\n    return new Promise((resolve, reject) => {\n      ApiService.post(\"users\", credentials)\n        .then(({ data }) => {\n          resolve(data);\n        })\n        .catch(({ response }) => {\n          context.commit(SET_ERROR, response.data);\n          reject(response);\n        });\n    });\n  },\n\n\n  // Check auth\n  [VALIDATE](context: any) {\n    if (JwtService.getToken()) {\n      ApiService.get(\"users/validate\", true)\n        .catch(({ response }) => {\n          console.log(response);\n          context.commit(PURGE_AUTH);\n        });\n    } else {\n      context.commit(PURGE_AUTH);\n    }\n  },\n\n\n  // Get profile\n  [GET_PROFILE](context: any) {\n    return new Promise(resolve => {\n      ApiService.get(\"users/profile\", true)\n        .then(({ data }) => {\n          context.commit(SET_PROFILE, data);\n          resolve(data);\n        })\n        .catch(({ response }) => {\n          context.commit(SET_ERROR, response);\n        });\n    });\n  },\n};\n\n\nconst mutations = {\n  // Set errors\n  [SET_ERROR](state: any, error: any) {\n    state.errors = error;\n  },\n\n  // Set auth\n  [SET_AUTH](state: any, token: string) {\n    state.isAuthenticated = true;\n    state.user.token = token;\n    state.errors = {};\n    JwtService.saveToken(state.user.token);\n  },\n\n  // Purge auth\n  [PURGE_AUTH](state: any) {\n    state.isAuthenticated = false;\n    state.user = {};\n    state.errors = {};\n    JwtService.destroyToken();\n  },\n\n  // Set profile\n  [SET_PROFILE](state: any, profile: any) {\n    state.profile = profile;\n    state.errors = {};\n  },\n};\n\n\nexport default {\n  state,\n  actions,\n  mutations,\n  getters\n};"],"sourceRoot":""}]}